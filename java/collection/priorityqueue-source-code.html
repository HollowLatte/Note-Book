<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.6" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.22" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://hollowlatte.github.io/Note-Book/Note-Book/java/collection/priorityqueue-source-code.html"><meta property="og:site_name" content="Note-Book"><meta property="og:title" content="PriorityQueue æºç åˆ†æ"><meta property="og:description" content="PriorityQueue ç®€ä»‹ PriorityQueue æ˜¯ Java ä¸­çš„ä¸€ç§é˜Ÿåˆ—æ•°æ®ç»“æ„ï¼Œè¢«ç§°ä¸º ä¼˜å…ˆçº§é˜Ÿåˆ— ã€‚å®ƒå’Œæ™®é€šé˜Ÿåˆ—ä¸åŒï¼Œæ™®é€šé˜Ÿåˆ—éƒ½æ˜¯éµå¾ªå…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„åŸåˆ™ï¼Œå³å…ˆæ·»åŠ çš„å…ƒç´ å…ˆå‡ºé˜Ÿï¼Œåæ·»åŠ çš„å…ƒç´ åå‡ºé˜Ÿã€‚è€Œ PriorityQueue åˆ™æ˜¯æŒ‰ç…§å…ƒç´ çš„ä¼˜å…ˆçº§æ¥å†³å®šå‡ºé˜Ÿçš„é¡ºåºï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œä¼˜å…ˆçº§è¶Šå°çš„å…ƒç´ è¶Šä¼˜å…ˆå‡ºé˜Ÿã€‚ é˜Ÿåˆ—é˜Ÿåˆ— å¦‚ä¸‹å›¾æ‰€..."><meta property="og:type" content="article"><meta property="og:image" content="https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/queue.png"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-03-27T18:36:54.000Z"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="PriorityQueue æºç åˆ†æ"><meta property="article:author" content="Hollow-Latte"><meta property="article:tag" content="Javaé›†åˆ"><meta property="article:modified_time" content="2024-03-27T18:36:54.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"PriorityQueue æºç åˆ†æ","image":["https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/queue.png","https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/normal-queue.png","https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/%20min-heap1.png","https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/min-heap1.png","https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/max-heap1.png","https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/minheap-enqueue-element-5-over.png","https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/min-heap1.png","https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/minheap-enqueue-element-5.png","https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/minheap-enqueue-element-5-shifup.png","https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/minheap-enqueue-element-5-over.png","https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/minheap-enqueue-element-5-over.png","https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/minheap-dequeue-element-5.png","https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/minheap-dequeue-element-5-siftdown.png","https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/minheap-dequeue-element-5-over.png","https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/minheap-array.png","https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/minheap-array-tree.png","https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/minheap-array-tree-siftdown1.png","https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/minheap-array-tree-siftdown2.png","https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/minheap-array-tree-siftdown3.png","https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/leetcode347.png","https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/img202306301210022.png"],"dateModified":"2024-03-27T18:36:54.000Z","author":[{"@type":"Person","name":"Hollow-Latte","url":"https://hollowlatte.github.io/Note-Book"}]}</script><meta name="robots" content="all"><meta name="author" content="Guide"><meta name="referrer" content="no-referrer"><meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="0"><meta name="keywords" content="JavaåŸºç¡€, å¤šçº¿ç¨‹, JVM, è™šæ‹Ÿæœº, æ•°æ®åº“, MySQL, Spring, Redis, MyBatis, ç³»ç»Ÿè®¾è®¡, åˆ†å¸ƒå¼, RPC, é«˜å¯ç”¨, é«˜å¹¶å‘"><meta name="apple-mobile-web-app-capable" content="yes"><script>var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?5dd2e8c97962d57b7b8fea1737c01743";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();</script><link ref="preconnect" href="https://fonts.googleapis.com"><link ref="preconnect" href="https://fonts.gstatic.com" crossorigin=""><link ref="stylesheet" href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap"><link rel="alternate" type="application/atom+xml" href="https://hollowlatte.github.io/Note-Book/Note-Book/atom.xml" title="Note-Book Atom Feed"><link rel="alternate" type="application/json" href="https://hollowlatte.github.io/Note-Book/Note-Book/feed.json" title="Note-Book JSON Feed"><link rel="alternate" type="application/rss+xml" href="https://hollowlatte.github.io/Note-Book/Note-Book/rss.xml" title="Note-Book RSS Feed"><link rel="icon" href="/Note-Book/favicon.ico"><title>PriorityQueue æºç åˆ†æ | Note-Book</title><meta name="description" content="PriorityQueue ç®€ä»‹ PriorityQueue æ˜¯ Java ä¸­çš„ä¸€ç§é˜Ÿåˆ—æ•°æ®ç»“æ„ï¼Œè¢«ç§°ä¸º ä¼˜å…ˆçº§é˜Ÿåˆ— ã€‚å®ƒå’Œæ™®é€šé˜Ÿåˆ—ä¸åŒï¼Œæ™®é€šé˜Ÿåˆ—éƒ½æ˜¯éµå¾ªå…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„åŸåˆ™ï¼Œå³å…ˆæ·»åŠ çš„å…ƒç´ å…ˆå‡ºé˜Ÿï¼Œåæ·»åŠ çš„å…ƒç´ åå‡ºé˜Ÿã€‚è€Œ PriorityQueue åˆ™æ˜¯æŒ‰ç…§å…ƒç´ çš„ä¼˜å…ˆçº§æ¥å†³å®šå‡ºé˜Ÿçš„é¡ºåºï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œä¼˜å…ˆçº§è¶Šå°çš„å…ƒç´ è¶Šä¼˜å…ˆå‡ºé˜Ÿã€‚ é˜Ÿåˆ—é˜Ÿåˆ— å¦‚ä¸‹å›¾æ‰€...">
    <link rel="preload" href="/Note-Book/assets/style-bCPtHIxr.css" as="style"><link rel="stylesheet" href="/Note-Book/assets/style-bCPtHIxr.css">
    <link rel="modulepreload" href="/Note-Book/assets/app-DNRIH2TH.js"><link rel="modulepreload" href="/Note-Book/assets/priorityqueue-source-code.html-srivy7ed.js"><link rel="modulepreload" href="/Note-Book/assets/plugin-vue_export-helper-DlAUqK2U.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="route-link vp-brand" href="/Note-Book/"><img class="vp-nav-logo" src="/Note-Book/logo.png" alt><!----><span class="vp-site-name hide-in-pad">Note-Book</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/Note-Book/home.html" aria-label="é¢è¯•æŒ‡å—"><FontIcon icon="java"></FontIcon>é¢è¯•æŒ‡å—<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="ğŸ§ç ”ç©¶"><span class="title"><FontIcon></FontIcon>ğŸ§ç ”ç©¶</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/Note-Book/research/open-source-project/" aria-label="å¼€æºé¡¹ç›®"><FontIcon icon="github"></FontIcon>å¼€æºé¡¹ç›®<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Note-Book/research/interesting/" aria-label="å¥½ç©çš„"><FontIcon icon="github"></FontIcon>å¥½ç©çš„<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/Note-Book/business/" aria-label="ğŸ˜‹ä¸šåŠ¡"><FontIcon></FontIcon>ğŸ˜‹ä¸šåŠ¡<!----></a></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/Note-Book/practice-manual/" aria-label="ğŸ˜å®è·µæ‰‹å†Œ"><FontIcon icon="about"></FontIcon>ğŸ˜å®è·µæ‰‹å†Œ<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="ğŸ˜°é—®é¢˜é›†åˆ"><span class="title"><FontIcon></FontIcon>ğŸ˜°é—®é¢˜é›†åˆ</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/Note-Book/problem/backend-problem/" aria-label="åç«¯é—®é¢˜"><FontIcon icon="github"></FontIcon>åç«¯é—®é¢˜<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Note-Book/problem/frontend-problem/" aria-label="å‰ç«¯é—®é¢˜"><FontIcon icon="github"></FontIcon>å‰ç«¯é—®é¢˜<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Note-Book/problem/non-dev/" aria-label="éå¼€å‘é—®é¢˜"><FontIcon icon="github"></FontIcon>éå¼€å‘é—®é¢˜<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/Note-Book/interview-shorthand/" aria-label="ğŸ’¯é¢è¯•é€Ÿè®°"><FontIcon icon="about"></FontIcon>ğŸ’¯é¢è¯•é€Ÿè®°<!----></a></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/Note-Book/notebook/" aria-label="ğŸ«µç¬”è®°æœ¬"><FontIcon icon="book"></FontIcon>ğŸ«µç¬”è®°æœ¬<!----></a></div><div class="nav-item hide-in-mobile"><a class="route-link nav-link" href="/Note-Book/algorithm/" aria-label="ğŸ§®ç®—æ³•"><FontIcon icon="book"></FontIcon>ğŸ§®ç®—æ³•<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="ğŸ¤£ç½‘ç«™ç›¸å…³"><span class="title"><FontIcon icon="about"></FontIcon>ğŸ¤£ç½‘ç«™ç›¸å…³</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="route-link nav-link" href="/Note-Book/about-the-author/" aria-label="å…³äºä½œè€…"><FontIcon icon="zuozhe"></FontIcon>å…³äºä½œè€…<!----></a></li><li class="dropdown-item"><a class="route-link nav-link" href="/Note-Book/timeline/" aria-label="æ›´æ–°å†å²"><FontIcon icon="history"></FontIcon>æ›´æ–°å†å²<!----></a></li></ul></button></div></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><div class="nav-item vp-repo"><a class="vp-repo-link" href="https://github.com/HollowLatte/Note-Book" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><GitHubIcon style="width:1.25rem;height:1.25rem;vertical-align:middle;"></GitHubIcon></a></div><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><form class="search-box" role="search"><input type="search" placeholder="æœç´¢" autocomplete="off" spellcheck="false" value><!----></form><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><FontIcon icon="star"></FontIcon><span class="vp-sidebar-title">å¿…çœ‹</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><FontIcon icon="interview"></FontIcon><span class="vp-sidebar-title">é¢è¯•å‡†å¤‡</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><FontIcon icon="java"></FontIcon><span class="vp-sidebar-title">Java</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><FontIcon icon="basic"></FontIcon><span class="vp-sidebar-title">åŸºç¡€</span><!----></p><ul class="vp-sidebar-links"><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Note-Book/java/basis/java-basic-questions-01.html" aria-label="JavaåŸºç¡€å¸¸è§é¢è¯•é¢˜æ€»ç»“(ä¸Š)"><FontIcon></FontIcon>JavaåŸºç¡€å¸¸è§é¢è¯•é¢˜æ€»ç»“(ä¸Š)<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Note-Book/java/basis/java-basic-questions-02.html" aria-label="JavaåŸºç¡€å¸¸è§é¢è¯•é¢˜æ€»ç»“(ä¸­)"><FontIcon></FontIcon>JavaåŸºç¡€å¸¸è§é¢è¯•é¢˜æ€»ç»“(ä¸­)<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Note-Book/java/basis/java-basic-questions-03.html" aria-label="JavaåŸºç¡€å¸¸è§é¢è¯•é¢˜æ€»ç»“(ä¸‹)"><FontIcon></FontIcon>JavaåŸºç¡€å¸¸è§é¢è¯•é¢˜æ€»ç»“(ä¸‹)<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><FontIcon icon="star"></FontIcon><span class="vp-sidebar-title">é‡è¦çŸ¥è¯†ç‚¹</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading active"><FontIcon icon="container"></FontIcon><span class="vp-sidebar-title">é›†åˆ</span><!----></p><ul class="vp-sidebar-links"><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Note-Book/java/collection/java-collection-questions-01.html" aria-label="Javaé›†åˆå¸¸è§é¢è¯•é¢˜æ€»ç»“(ä¸Š)"><FontIcon></FontIcon>Javaé›†åˆå¸¸è§é¢è¯•é¢˜æ€»ç»“(ä¸Š)<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Note-Book/java/collection/java-collection-questions-02.html" aria-label="Javaé›†åˆå¸¸è§é¢è¯•é¢˜æ€»ç»“(ä¸‹)"><FontIcon></FontIcon>Javaé›†åˆå¸¸è§é¢è¯•é¢˜æ€»ç»“(ä¸‹)<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Note-Book/java/collection/java-collection-precautions-for-use.html" aria-label="Javaé›†åˆä½¿ç”¨æ³¨æ„äº‹é¡¹æ€»ç»“"><FontIcon></FontIcon>Javaé›†åˆä½¿ç”¨æ³¨æ„äº‹é¡¹æ€»ç»“<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><FontIcon icon="star"></FontIcon><span class="vp-sidebar-title">æºç åˆ†æ</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Note-Book/java/collection/arraylist-source-code.html" aria-label="ArrayList æºç åˆ†æ"><FontIcon></FontIcon>ArrayList æºç åˆ†æ<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Note-Book/java/collection/linkedlist-source-code.html" aria-label="LinkedList æºç åˆ†æ"><FontIcon></FontIcon>LinkedList æºç åˆ†æ<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Note-Book/java/collection/hashmap-source-code.html" aria-label="HashMap æºç åˆ†æ"><FontIcon></FontIcon>HashMap æºç åˆ†æ<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Note-Book/java/collection/concurrent-hash-map-source-code.html" aria-label="ConcurrentHashMap æºç åˆ†æ"><FontIcon></FontIcon>ConcurrentHashMap æºç åˆ†æ<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Note-Book/java/collection/copyonwritearraylist-source-code.html" aria-label="CopyOnWriteArrayList æºç åˆ†æ"><FontIcon></FontIcon>CopyOnWriteArrayList æºç åˆ†æ<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Note-Book/java/collection/arrayblockingqueue-source-code.html" aria-label="ArrayBlockingQueue æºç åˆ†æ"><FontIcon></FontIcon>ArrayBlockingQueue æºç åˆ†æ<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!----></li></ul></section></li></ul></section></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading"><FontIcon icon="et-performance"></FontIcon><span class="vp-sidebar-title">å¹¶å‘ç¼–ç¨‹</span><!----></p><ul class="vp-sidebar-links"><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Note-Book/java/concurrent/java-concurrent-questions-01.html" aria-label="Javaå¹¶å‘å¸¸è§é¢è¯•é¢˜æ€»ç»“ï¼ˆä¸Šï¼‰"><FontIcon></FontIcon>Javaå¹¶å‘å¸¸è§é¢è¯•é¢˜æ€»ç»“ï¼ˆä¸Šï¼‰<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Note-Book/java/concurrent/java-concurrent-questions-02.html" aria-label="Javaå¹¶å‘å¸¸è§é¢è¯•é¢˜æ€»ç»“ï¼ˆä¸­ï¼‰"><FontIcon></FontIcon>Javaå¹¶å‘å¸¸è§é¢è¯•é¢˜æ€»ç»“ï¼ˆä¸­ï¼‰<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="route-link nav-link vp-sidebar-link vp-sidebar-page" href="/Note-Book/java/concurrent/java-concurrent-questions-03.html" aria-label="Javaå¹¶å‘å¸¸è§é¢è¯•é¢˜æ€»ç»“ï¼ˆä¸‹ï¼‰"><FontIcon></FontIcon>Javaå¹¶å‘å¸¸è§é¢è¯•é¢˜æ€»ç»“ï¼ˆä¸‹ï¼‰<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><FontIcon icon="star"></FontIcon><span class="vp-sidebar-title">é‡è¦çŸ¥è¯†ç‚¹</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><FontIcon icon="code"></FontIcon><span class="vp-sidebar-title">IO</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><FontIcon icon="virtual_machine"></FontIcon><span class="vp-sidebar-title">JVM</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><FontIcon icon="featured"></FontIcon><span class="vp-sidebar-title">æ–°ç‰¹æ€§</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><FontIcon icon="computer"></FontIcon><span class="vp-sidebar-title">è®¡ç®—æœºåŸºç¡€</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><FontIcon icon="database"></FontIcon><span class="vp-sidebar-title">æ•°æ®åº“</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><FontIcon icon="tool"></FontIcon><span class="vp-sidebar-title">å¼€å‘å·¥å…·</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><FontIcon icon="component"></FontIcon><span class="vp-sidebar-title">å¸¸ç”¨æ¡†æ¶</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><FontIcon icon="design"></FontIcon><span class="vp-sidebar-title">ç³»ç»Ÿè®¾è®¡</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><FontIcon icon="distributed-network"></FontIcon><span class="vp-sidebar-title">åˆ†å¸ƒå¼</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><FontIcon icon="et-performance"></FontIcon><span class="vp-sidebar-title">é«˜æ€§èƒ½</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><FontIcon icon="highavailable"></FontIcon><span class="vp-sidebar-title">é«˜å¯ç”¨</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><FontIcon></FontIcon>PriorityQueue æºç åˆ†æ</h1><div class="page-info"><AuthorInfo localizeddate="2024å¹´3æœˆ27æ—¥" isoriginal="false" pageview="true" pure="true"></AuthorInfo><CategoryInfo localizeddate="2024å¹´3æœˆ27æ—¥" isoriginal="false" pageview="true" pure="true"></CategoryInfo><TagInfo localizeddate="2024å¹´3æœˆ27æ—¥" isoriginal="false" pageview="true" pure="true"></TagInfo><DateInfo localizeddate="2024å¹´3æœˆ27æ—¥" isoriginal="false" pageview="true" pure="true"></DateInfo><OriginalInfo localizeddate="2024å¹´3æœˆ27æ—¥" isoriginal="false" pageview="true" pure="true"></OriginalInfo><WordInfo localizeddate="2024å¹´3æœˆ27æ—¥" isoriginal="false" pageview="true" pure="true"></WordInfo><ReadingTimeInfo localizeddate="2024å¹´3æœˆ27æ—¥" isoriginal="false" pageview="true" pure="true"></ReadingTimeInfo></div><hr></div><!----><!--[--><!----><!--]--><div class="theme-hope-content"><h2 id="priorityqueue-ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#priorityqueue-ç®€ä»‹"><span>PriorityQueue ç®€ä»‹</span></a></h2><p><code>PriorityQueue</code> æ˜¯ Java ä¸­çš„ä¸€ç§é˜Ÿåˆ—æ•°æ®ç»“æ„ï¼Œè¢«ç§°ä¸º <strong>ä¼˜å…ˆçº§é˜Ÿåˆ—</strong> ã€‚å®ƒå’Œæ™®é€šé˜Ÿåˆ—ä¸åŒï¼Œæ™®é€šé˜Ÿåˆ—éƒ½æ˜¯éµå¾ªå…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„åŸåˆ™ï¼Œå³å…ˆæ·»åŠ çš„å…ƒç´ å…ˆå‡ºé˜Ÿï¼Œåæ·»åŠ çš„å…ƒç´ åå‡ºé˜Ÿã€‚è€Œ <code>PriorityQueue</code> åˆ™æ˜¯æŒ‰ç…§å…ƒç´ çš„ä¼˜å…ˆçº§æ¥å†³å®šå‡ºé˜Ÿçš„é¡ºåºï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œä¼˜å…ˆçº§è¶Šå°çš„å…ƒç´ è¶Šä¼˜å…ˆå‡ºé˜Ÿã€‚</p><figure><img src="https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/queue.png" alt="é˜Ÿåˆ—" tabindex="0"><figcaption>é˜Ÿåˆ—</figcaption></figure><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¦‚æœæ˜¯æ™®é€šé˜Ÿåˆ—ï¼Œæˆ‘ä»¬æŒ‰ç…§å…ƒç´  1 åˆ°å…ƒç´  4 çš„é¡ºåºä¾æ¬¡å…¥é˜Ÿçš„è¯ï¼Œé‚£ä¹ˆå‡ºé˜Ÿçš„é¡ºåºåˆ™ä¹Ÿæ˜¯å…ƒç´  1 åˆ° 4ã€‚</p><figure><img src="https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/normal-queue.png" alt="æ™®é€šé˜Ÿåˆ—" tabindex="0"><figcaption>æ™®é€šé˜Ÿåˆ—</figcaption></figure><p>è€Œä¼˜å…ˆé˜Ÿåˆ—çš„é€»è¾‘å­˜å‚¨ç»“æ„å’Œæ™®é€šé˜Ÿåˆ—æœ‰æ‰€ä¸åŒï¼Œä»¥ <code>PriorityQueue</code> ä¸ºä¾‹ï¼Œå…¶åº•å±‚å®é™…ä¸Šæ˜¯ä½¿ç”¨ <strong>å°é¡¶å †</strong> å½¢å¼çš„äºŒå‰å †ï¼Œå³å€¼æœ€å°çš„å…ƒç´ ä¼˜å…ˆå‡ºé˜Ÿã€‚</p><p>å¯èƒ½å¾ˆå¤šè¯»è€…å¯¹äºŒå‰å †çš„ä¸æ˜¯å¾ˆç†è§£ï¼Œè¿™é‡Œç¬”è€…ä»¥å°é¡¶å †ä¸ºä¾‹ã€‚å‡å¦‚æˆ‘ä»¬çš„å…ƒç´  1 åˆ°å…ƒç´  4 çš„ä¼˜å…ˆçº§åˆ†åˆ«æ˜¯:2ã€1ã€3ã€4ã€‚é‚£ä¹ˆæŒ‰ç…§ JDK æ‰€æä¾›çš„å°é¡¶å †ï¼Œå…ƒç´ çš„æ’åˆ—å°±ä¼šä»¥ä¸‹é¢è¿™ç§å½¢å¼å‘ˆç°ï¼Œå¯ä»¥çœ‹åˆ°äºŒå‰å †è¿™ç§æ•°æ®ç»“æ„ç¬¦åˆä»¥ä¸‹å‡ ç§æ€§è´¨:</p><ol><li>äºŒå‰å †æ˜¯ä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘ï¼Œå³åœ¨èŠ‚ç‚¹ä¸ªæ•°æ— æ³•æ„æˆä¸€ä¸ªæ»¡äºŒå‰æ ‘(æ¯ä¸€å±‚èŠ‚ç‚¹éƒ½æ’æ»¡)æ—¶ï¼Œå¶å­èŠ‚ç‚¹ä¼šå‡ºç°åœ¨æœ€åä¸€å±‚ï¼Œä¸è¶³åŒæ•°çš„æƒ…å†µä¸‹å¶å­èŠ‚ç‚¹ä¼šå°½å¯èƒ½é å·¦ï¼Œå¦‚ä¸‹å›¾æœ€åä¸€å±‚åªæœ‰ä¸€ä¸ªå…ƒç´  4ï¼Œå°±æŠŠå®ƒæ”¾åœ¨å·¦è¾¹ã€‚</li><li>å°é¡¶å †çš„æƒ…å†µä¸‹ï¼Œçˆ¶èŠ‚ç‚¹çš„å€¼æ°¸è¿œå°äºä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œå¤§é¡¶å †åä¹‹ã€‚</li><li>äºŒå‰å †çš„å¤§å°å…³ç³»æ°¸è¿œåªé’ˆå¯¹çˆ¶å­å­™è¿™æ ·çš„å±‚çº§ï¼Œå‡è®¾æˆ‘ä»¬ç”¨çš„æ˜¯å°é¡¶å †ï¼Œè¿™å¹¶ä¸èƒ½è¯´æ˜ç¬¬äºŒå±‚èŠ‚ç‚¹å°±ä¸€å®šæ¯”ç¬¬ä¸‰å±‚èŠ‚ç‚¹å°ï¼Œå¦‚ä¸‹å›¾çš„å…ƒç´  3 å’Œå…ƒç´  4ã€‚</li></ol><figure><img src="https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/ min-heap1.png" alt="å°é¡¶å †" tabindex="0"><figcaption>å°é¡¶å †</figcaption></figure><p><code>PriorityQueue</code>å¯ä»¥è®©æˆ‘ä»¬æ–¹ä¾¿åœ°æŒ‰ç…§ä¼˜å…ˆçº§æ‰§è¡Œä»»åŠ¡ï¼Œåªè¦æŠŠä»»åŠ¡æŒ‰ç…§ä¼˜å…ˆçº§æ”¾å…¥é˜Ÿåˆ—ï¼Œæ¯æ¬¡å–å‡ºçš„éƒ½æ˜¯ä¼˜å…ˆçº§æœ€é«˜ï¼ˆå€¼æœ€å°ï¼‰çš„ä»»åŠ¡ï¼Œä¸ç”¨å…³å¿ƒæ’åºå’Œå‡ºé˜Ÿçš„ç»†èŠ‚ã€‚</p><p>ç®€è€Œè¨€ä¹‹ï¼Œ<code>PriorityQueue</code> é€‚åˆè§£å†³æ‰¾æœ€å¤§å€¼æˆ–æœ€å°å€¼çš„é—®é¢˜ï¼Œå¸¸ç”¨äºä»»åŠ¡è°ƒåº¦ã€äº‹ä»¶å¤„ç†ã€å›¾è®ºç®—æ³•ç­‰åœºæ™¯ã€‚</p><h2 id="æ‰‹å†™ä¸€ä¸ª-priorityqueue" tabindex="-1"><a class="header-anchor" href="#æ‰‹å†™ä¸€ä¸ª-priorityqueue"><span>æ‰‹å†™ä¸€ä¸ª PriorityQueue</span></a></h2><p>JDK æä¾›çš„ <code>PriorityQueue</code> ç”¨åˆ°å †çš„æ€æƒ³ï¼Œä¸ºäº†æ›´å¥½åœ°ç†è§£ <code>PriorityQueue</code> çš„åº•å±‚è®¾è®¡ï¼Œæˆ‘ä¼šå…ˆæ‰‹å†™ä¸€ä¸ªäºŒå‰å †å¸¦è¯»è€…äº†è§£ä¸€ä¸‹äºŒå‰å †çš„åŸºæœ¬æ€§è´¨ä»¥åŠ siftUp å’Œ siftDown æ“ä½œã€‚ç„¶åï¼Œæˆ‘ä¼šåŸºäºè¿™ä¸ªäºŒå‰å †æ¨¡ä»¿ JDK å®ç°ä¸€ä¸ªè‡ªå·±çš„ <code>PriorityQueue</code> ã€‚</p><p>å¹¶ä¸”ï¼Œæœ€åæˆ‘è¿˜ä¼šç”¨è‡ªå·±çš„ <code>PriorityQueue</code> å’Œ JDK æä¾›çš„ <code>PriorityQueue</code> æ¥çœŸæ­£çš„è§£å†³ä¸€é“ç»å…¸çš„ Leetcode é¢˜ï¼Œå¸®åŠ©å¤§å®¶ç†Ÿç»ƒæŒæ¡ <code>PriorityQueue</code>ã€‚</p><h3 id="äºŒå‰å †ç®€ä»‹" tabindex="-1"><a class="header-anchor" href="#äºŒå‰å †ç®€ä»‹"><span>äºŒå‰å †ç®€ä»‹</span></a></h3><p>äºŒå‰å †ä»é€»è¾‘ç»“æ„ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶çœ‹ä½œæ˜¯ä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘ï¼Œè€Œå®Œå…¨äºŒå‰æ ‘æ˜¯ä¸€ç§æ¯”è¾ƒç‰¹å®šæƒ…å†µä¸‹çš„æ ‘å½¢ç»“æ„ï¼Œå®ƒæœ‰ä»¥ä¸‹å‡ ç§æ€§è´¨:</p><ol><li>éå¶å­èŠ‚ç‚¹å±‚æ¬¡å°½å¯èƒ½æ»¡ã€‚</li><li>å¶å­èŠ‚ç‚¹æ•°é‡ä¸º <code>2^(h-1)</code> ä¸ªï¼Œæ³¨æ„è¿™é‡Œæ˜¯ h æ˜¯ä» 1 å¼€å§‹ç®—çš„;å¦‚æœä¸æ»¡çš„æƒ…å†µä¸‹ï¼Œå¶å­èŠ‚ç‚¹è¦å°½å¯èƒ½çš„é å·¦æ’åˆ—ã€‚</li></ol><p>å¹¶ä¸”ï¼ŒäºŒå‰å †ä¼šæŒ‰ç…§æ’åºçš„è§„åˆ™åˆ†ä¸º <strong>å°é¡¶å †</strong> å’Œ <strong>å¤§é¡¶å †</strong> ã€‚</p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè¿™å°±æ˜¯å…¸å‹çš„å°é¡¶å †ï¼Œå®ƒæ—¢åƒä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘(æœ€åä¸€å±‚ä¸æ»¡çš„æƒ…å†µä¸‹ï¼ŒèŠ‚ç‚¹å°½å¯èƒ½é å·¦ï¼Œéå¶å­èŠ‚ç‚¹çš„å±‚èŠ‚ç‚¹æ’æ»¡)ã€‚åˆæŒ‰ç…§å°é¡¶å †çš„è§„åˆ™æ’åˆ—èŠ‚ç‚¹ï¼Œå³æ¯ä¸€ä¸ªçˆ¶èŠ‚ç‚¹çš„å€¼éƒ½æ¯”å®ƒä¸‹ä¸€å±‚çš„å­èŠ‚ç‚¹å°ã€‚</p><figure><img src="https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/min-heap1.png" alt="å°é¡¶å †" tabindex="0"><figcaption>å°é¡¶å †</figcaption></figure><p>è€Œå¤§é¡¶å †åˆ™ç›¸åï¼Œåœ¨ç¬¦åˆå®Œå…¨äºŒå‰æ ‘çš„æ€§è´¨çš„æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„çˆ¶èŠ‚ç‚¹çš„å€¼éƒ½æ¯”å…¶ä¸‹ä¸€å±‚çš„å­èŠ‚ç‚¹çš„å€¼å¤§ã€‚</p><figure><img src="https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/max-heap1.png" alt="å¤§é¡¶å †" tabindex="0"><figcaption>å¤§é¡¶å †</figcaption></figure><h3 id="åŸºäº-jdk-åŠ¨æ€æ•°ç»„å®ç°äºŒå‰å †" tabindex="-1"><a class="header-anchor" href="#åŸºäº-jdk-åŠ¨æ€æ•°ç»„å®ç°äºŒå‰å †"><span>åŸºäº JDK åŠ¨æ€æ•°ç»„å®ç°äºŒå‰å †</span></a></h3><p>ä¸ºäº†å®ç°ä¸€ä¸ªäºŒå‰å †ï¼Œæˆ‘ä»¬éœ€è¦é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„æ¥å­˜å‚¨å…ƒç´ ã€‚å¸¸ç”¨çš„é€‰æ‹©æœ‰æ•°ç»„å’Œé“¾è¡¨ï¼ŒäºŒè€…åœ¨å…¥é˜Ÿå’Œå‡ºé˜Ÿæ“ä½œä¸Šçš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ <strong>O(logn)</strong> ã€‚ç”±äºé“¾è¡¨éœ€è¦é¢å¤–çš„ç©ºé—´æ¥å­˜å‚¨èŠ‚ç‚¹é—´çš„çˆ¶å­å…³ç³»ï¼Œè€Œæ•°ç»„å¯ä»¥åˆ©ç”¨åœ°å€è¿ç»­å›ºå®šçš„ç‰¹ç‚¹ï¼Œç”¨ç®€å•çš„å…¬å¼æ¥è¡¨ç¤ºçˆ¶å­å…³ç³»ã€‚å› æ­¤ï¼Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨åŠ¨æ€æ•°ç»„æ¥å®ç°ä¸€ä¸ªäºŒå‰å †ï¼Œè¿™ä¹Ÿæ˜¯JDKæä¾›çš„ <code>PriorityQueue</code> çš„åšæ³•ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡è§‚å¯Ÿä¸‹å›¾æ¥æ¨å¯¼ä¸€ä¸‹è¿™ä¸ªè¡¨ç¤ºçˆ¶å­å…³ç³»çš„å…¬å¼ã€‚</p><figure><img src="https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/minheap-enqueue-element-5-over.png" alt="å°é¡¶å †" tabindex="0"><figcaption>å°é¡¶å †</figcaption></figure><p>æˆ‘ä»¬ç”¨ <code>parentIndex</code> è¡¨ç¤ºçˆ¶èŠ‚ç‚¹ç´¢å¼•ï¼Œç”¨ <code>leftIndex</code> è¡¨ç¤ºå·¦å­èŠ‚ç‚¹ç´¢å¼•ï¼Œç”¨ <code>rightIndex</code> è¡¨ç¤ºå³å­èŠ‚ç‚¹ã€‚æœ€ç»ˆï¼Œå¾—å‡ºä»¥ä¸‹ 3 ä¸ªå…¬å¼:</p><ol><li><code>leftIndex = 2 * parentIndex+1</code></li><li><code>rightIndex = 2 * parentIndex+2</code></li><li><code>parentIndex=âŒŠ(leftIndex/rightIndex-1)/2âŒ‹</code>(âŒŠâŒ‹è¡¨ç¤ºå‘ä¸‹å–æ•´)</li></ol><p>å¾—å‡ºè¿™å¥—è§„å¾‹ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹ç€æ‰‹ç¼–å†™äºŒå‰å † <code>MinHeap</code> çš„ä»£ç äº†ã€‚</p><h4 id="æºç å®ç°" tabindex="-1"><a class="header-anchor" href="#æºç å®ç°"><span>æºç å®ç°</span></a></h4><p><code>MinHeap</code> ç±»çš„å®šä¹‰å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * å…ƒç´ æ˜¯å¯æ¯”è¾ƒçš„å°é¡¶å †
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MinHeap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> comparator<span class="token punctuation">;</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åªæœ‰ 2 ä¸ªæ¯”è¾ƒæ ¸å¿ƒçš„å˜é‡å±æ€§ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><ul><li><code>list</code>ï¼šè¡¨ç¤ºå­˜æ”¾å…ƒç´ çš„åˆ—è¡¨ï¼ˆåº•å±‚åŸºäºæ•°ç»„ï¼‰</li><li><code>comparator</code>ï¼šè¡¨ç¤ºæ¯”è¾ƒå™¨å¯¹è±¡ï¼Œå¦‚æœä¸ºç©ºï¼Œä½¿ç”¨è‡ªç„¶æ’åº</li></ul><p><code>MinHeap</code> ç±»çš„æ„é€ æ–¹æ³•å¦‚ä¸‹ï¼Œå…±æœ‰ 5 ä¸ªï¼ˆæ³¨é‡Šéå¸¸æ¸…æ¥šï¼Œè¿™é‡Œå°±ä¸é¢å¤–è§£é‡Šäº†ï¼‰ï¼š</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * åˆ›å»ºä¸€ä¸ªç©ºçš„æœ€å°å †
 */</span>
<span class="token keyword">public</span> <span class="token class-name">MinHeap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * åˆ›å»ºä¸€ä¸ªç©ºçš„æœ€å°å †ï¼Œå¹¶æŒ‡å®šæ¯”è¾ƒå™¨æ¥å†³å®šå…ƒç´ ä¹‹é—´çš„é¡ºåº
 */</span>
<span class="token keyword">public</span> <span class="token class-name">MinHeap</span><span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> comparator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>comparator <span class="token operator">=</span> comparator<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * å‚æ•°ä¸ºæ•°ç»„ï¼Œå°†ç»™å®šçš„æ•°ç»„è½¬æ¢ä¸ºä¸€ä¸ªæœ€å°å †
 */</span>
<span class="token keyword">public</span> <span class="token class-name">MinHeap</span><span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">heapify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * åˆ›å»ºæŒ‡å®šå®¹é‡çš„æœ€å°å †
 */</span>
<span class="token keyword">public</span> <span class="token class-name">MinHeap</span><span class="token punctuation">(</span><span class="token keyword">int</span> capacity<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>capacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token doc-comment comment">/**
 * åˆ›å»ºæŒ‡å®šå®¹é‡çš„æœ€å°å †å¹¶æŒ‡å®šæ¯”è¾ƒå™¨
 */</span>
<span class="token keyword">public</span> <span class="token class-name">MinHeap</span><span class="token punctuation">(</span><span class="token keyword">int</span> capacity<span class="token punctuation">,</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> comparator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>capacity<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>comparator <span class="token operator">=</span> comparator<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬ 3 ä¸ªæ„é€ æ–¹æ³• <code>MinHeap(E[] arr) </code> æ¶‰åŠåˆ° <code>heapify()</code> æ–¹æ³•ï¼Œæˆ‘ä»¬ä¼šå†åé¢è¿›è¡Œè¯¦ç»†ä»‹ç»ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æŠŠé›†åˆä¸­ä¸€äº›å¸¸è§çš„æ“ä½œä¾‹å¦‚è·å–å…ƒç´ å¤§å°ã€æ˜¯å¦ä¸ºç©ºã€è·å–å½“å‰èŠ‚ç‚¹å·¦å­èŠ‚ç‚¹ã€å³å­èŠ‚ç‚¹ã€çˆ¶èŠ‚ç‚¹ç­‰æ–¹æ³•å…ˆå®šä¹‰å¥½ï¼Œæ¯”è¾ƒç®€å•ã€‚</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * è¿”å›å †ä¸­å…ƒç´ ä¸ªæ•°
 */</span>
<span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * åˆ¤æ–­å †å…ƒç´ æ˜¯å¦ä¸ºç©º
 */</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token doc-comment comment">/**
 * è·å–å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ç´¢å¼•
 */</span>
<span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">parentIndex</span><span class="token punctuation">(</span><span class="token keyword">int</span> childIndex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>childIndex <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>childIndex <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * è¿”å›å½“å‰èŠ‚ç‚¹çš„å·¦å­èŠ‚ç‚¹
 */</span>
<span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">leftIndex</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">2</span> <span class="token operator">*</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * è¿”å›å½“å‰èŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹
 */</span>
<span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">rightIndex</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">2</span> <span class="token operator">*</span> index <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åï¼Œæˆ‘ä»¬å†æ¥ç€æ‰‹å¼€å‘ä¸€ä¸‹å…¥é˜Ÿçš„æ“ä½œï¼Œæˆ‘ä»¬è¿˜æ˜¯ä»¥è¿™ä¸ªå°é¡¶å †ä¸ºä¾‹ï¼Œå‡å¦‚æˆ‘ä»¬ç°åœ¨è¦æ’å…¥ä¸€ä¸ªå…ƒç´  5(ä¼˜å…ˆçº§ä¸º 0)ï¼Œè¦æ€ä¹ˆåšå‘¢ï¼Ÿ</p><figure><img src="https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/min-heap1.png" alt="åŸå§‹å°é¡¶å †" tabindex="0"><figcaption>åŸå§‹å°é¡¶å †</figcaption></figure><p>é¦–å…ˆæˆ‘ä»¬ä¸ºäº†ä¿è¯å…ƒç´ æ’å…¥çš„æ•ˆç‡ï¼Œè‡ªç„¶ä¼šä¼˜å…ˆå°†å…¶æ·»åŠ åˆ°æ•°ç»„æœ«ç«¯ï¼Œæ·»åŠ å®Œæˆä¹‹åï¼Œæˆ‘ä»¬å‘ç°å°é¡¶å †å¤±è¡¡äº†ï¼Œå­èŠ‚ç‚¹çš„å€¼æ¯”çˆ¶èŠ‚ç‚¹çš„å€¼è¿˜è¦å°ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ <code>siftUp</code> ä¿æŒä¸€ä¸‹å¹³è¡¡ã€‚</p><figure><img src="https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/minheap-enqueue-element-5.png" alt="å…ˆå°†å…ƒç´ 5æ’å…¥åˆ°æ•°ç»„æœ«ç«¯" tabindex="0"><figcaption>å…ˆå°†å…ƒç´ 5æ’å…¥åˆ°æ•°ç»„æœ«ç«¯</figcaption></figure><p><code>siftUp</code> çš„æ“ä½œå¾ˆç®€å•ï¼Œé¦–å…ˆå°†å…ƒç´  5 å’Œå…¶çˆ¶èŠ‚ç‚¹å…ƒç´  1 æ¯”è¾ƒï¼Œå‘ç°å…ƒç´  5 çš„å€¼æ¯”å…ƒç´  1 çš„å°ï¼Œä¸¤è€…äº¤æ¢ä¸€ä¸‹ä½ç½®ã€‚</p><figure><img src="https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/minheap-enqueue-element-5-shifup.png" alt="å¯¹å°é¡¶å †è¿›è¡Œ siftUp" tabindex="0"><figcaption>å¯¹å°é¡¶å †è¿›è¡Œ siftUp</figcaption></figure><p>å› ä¸ºç´¢å¼• 1 ä½ç½®çš„å…ƒç´ å˜ä¸ºå…ƒç´  5ï¼Œæ‰€ä»¥å…ƒç´  5 éœ€è¦å†æ¬¡å’Œå½“å‰çš„çˆ¶èŠ‚ç‚¹æ¯”è¾ƒä¸€ä¸‹ï¼Œå‘ç°å…ƒç´  5 çš„å€¼ä¹Ÿæ¯”å…ƒç´  2 çš„å€¼å°ï¼Œæ‰€ä»¥ä¸¤è€…éœ€è¦å†æ¬¡äº¤æ¢ä½ç½®ã€‚</p><p>æœ€ç»ˆå…ƒç´  5 åˆ°è¾¾æ ¹èŠ‚ç‚¹ï¼Œæ— éœ€å†è¿›è¡Œæ¯”è¾ƒï¼Œè‡ªæ­¤ä¸€ä¸ªæ–°å…ƒç´ å…¥é˜Ÿå®Œæˆã€‚</p><figure><img src="https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/minheap-enqueue-element-5-over.png" alt="æ’å…¥ä¼˜å…ˆçº§ä¸º0çš„å…ƒç´ 5å" tabindex="0"><figcaption>æ’å…¥ä¼˜å…ˆçº§ä¸º0çš„å…ƒç´ 5å</figcaption></figure><p>è‡ªæ­¤æˆ‘ä»¬çš„ç¼–ç ä¹Ÿå¯ä»¥å¾ˆå¿«é€Ÿçš„ç¼–å†™å®Œæˆäº†ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤º,æ•´ä½“æ­¥éª¤ä¸º:</p><ol><li>å°†æ–°å…ƒç´ æ’å…¥äºŒå‰å †(æ•°ç»„)æœ«ç«¯ã€‚</li><li>è‡ªäºŒå‰å †æœ«ç«¯å¼€å§‹å¼€å§‹æ¯”è¾ƒï¼Œå¦‚æœå½“å‰èŠ‚ç‚¹æ¯”çˆ¶èŠ‚ç‚¹å°ï¼Œåˆ™äº¤æ¢ä¸¤è€…çš„å€¼ï¼Œç›´åˆ°çˆ¶èŠ‚ç‚¹å€¼æ¯”å­èŠ‚ç‚¹å°æˆ–è€…ç´¢å¼•ä¸º 0 ä¸ºæ­¢ã€‚</li></ol><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * å°†å…ƒç´ å­˜åˆ°å°é¡¶å †ä¸­
 */</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">siftUp</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * ä¸ºäº†ä¿è¯æ–°å¢èŠ‚ç‚¹åï¼Œæ•°ç»„ä»ç¬¦åˆå°é¡¶å †ç‰¹æ€§ï¼Œè¿™é‡Œéœ€è¦siftUpä¿æŒä¸€ä¸‹å¹³è¡¡
 */</span>
<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">siftUp</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>comparator <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//å¾ªç¯è‡ªæ–°å¢èŠ‚ç‚¹å¼€å§‹è‡ªåº•å‘ä¸Šæ¯”è¾ƒå­èŠ‚ç‚¹å’Œçˆ¶èŠ‚ç‚¹å¤§å°ï¼Œå¦‚æœå­èŠ‚ç‚¹å¤§äºçˆ¶èŠ‚ç‚¹åˆ™äº¤æ¢ä¸¤è€…çš„å€¼</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> comparator<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token function">parentIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">E</span> tmpElement <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
            list<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token function">parentIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            list<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token function">parentIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">,</span> tmpElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
            index <span class="token operator">=</span> <span class="token function">parentIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">//å¾ªç¯è‡ªæ–°å¢èŠ‚ç‚¹å¼€å§‹è‡ªåº•å‘ä¸Šæ¯”è¾ƒå­èŠ‚ç‚¹å’Œçˆ¶èŠ‚ç‚¹å¤§å°ï¼Œå¦‚æœå­èŠ‚ç‚¹å¤§äºçˆ¶èŠ‚ç‚¹åˆ™äº¤æ¢ä¸¤è€…çš„å€¼</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">)</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token function">parentIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">E</span> tmpElement <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
            list<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token function">parentIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            list<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token function">parentIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">,</span> tmpElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
            index <span class="token operator">=</span> <span class="token function">parentIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®Œæˆå…¥é˜Ÿæ“ä½œä¹‹åï¼Œæˆ‘ä»¬å°±éœ€è¦å®Œæˆå‡ºé˜Ÿæ“ä½œäº†ã€‚</p><p>è¿˜æ˜¯ä»¥ä¸Šä¸€å¼ å›¾ä¸ºä¾‹ï¼Œæ­¤æ—¶æˆ‘ä»¬çš„å°é¡¶å †é•¿è¿™æ ·ï¼Œå‡ºé˜Ÿæ“ä½œæ—¶ï¼Œæˆ‘ä»¬è¦å°†å †é¡¶å…ƒç´ å¼¹å‡ºã€‚</p><figure><img src="https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/minheap-enqueue-element-5-over.png" alt="åŸå§‹å°é¡¶å †" tabindex="0"><figcaption>åŸå§‹å°é¡¶å †</figcaption></figure><p>å¼¹å‡ºä¹‹åï¼Œå †é¡¶ä¸ºç©ºï¼Œå¦‚æœæˆ‘ä»¬å•çº¯çš„ä½¿ç”¨å·¦å­èŠ‚ç‚¹æˆ–è€…å³å­èŠ‚ç‚¹è¿›è¡Œ <code>siftUp</code>,å¹³å‡æ¯”è¾ƒæ¬¡æ•°å°±ä¼šæ¿€å¢ï¼Œæ‰€ä»¥æœ€ç¨³å¦¥çš„åšæ³•ï¼Œæ˜¯å°†æœ«ç«¯èŠ‚ç‚¹ç§»åŠ¨åˆ°å †é¡¶ï¼Œè¿›è¡Œ <code>siftDown</code> æ“ä½œã€‚</p><figure><img src="https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/minheap-dequeue-element-5.png" alt="å…ˆå°†æ ˆé¡¶å…ƒç´ 5å¼¹å‡º" tabindex="0"><figcaption>å…ˆå°†æ ˆé¡¶å…ƒç´ 5å¼¹å‡º</figcaption></figure><p>æ‰€ä»¥æˆ‘ä»¬é¦–å…ˆå°†æœ«ç«¯å…ƒç´ ç§»åŠ¨åˆ°å †é¡¶ï¼Œç„¶åä»å·¦å³å­èŠ‚ç‚¹ä¸­æ‰¾åˆ°ä¸€ä¸ªæœ€å°çš„å’Œå®ƒè¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœå­˜æœ‰æ¯”å®ƒæ›´å°çš„ï¼Œåˆ™äº¤æ¢ä½ç½®ã€‚ ç»è¿‡æ¯”è¾ƒæˆ‘ä»¬å‘ç°å…ƒç´  2 æ›´å°ï¼Œæ‰€ä»¥å…ƒç´  1 è¦å’Œå…ƒç´  2 è¿›è¡Œä½ç½®äº¤æ¢ã€‚</p><figure><img src="https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/minheap-dequeue-element-5-siftdown.png" alt="å¯¹å°é¡¶å †è¿›è¡Œ siftDown" tabindex="0"><figcaption>å¯¹å°é¡¶å †è¿›è¡Œ siftDown</figcaption></figure><p>äº¤æ¢å®Œæˆåå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ­¤æ—¶æˆ‘ä»¬å‘ç°å…ƒç´  1 çš„å€¼æ¯”å…ƒç´  4 å°ï¼Œæ‰€ä»¥æ— éœ€è¿›è¡Œäº¤æ¢ï¼Œæ¯”è¾ƒç»“æŸï¼Œè‡ªæ­¤äºŒå‰å †çš„ä¸€ä¸ªå‡ºé˜Ÿæ“ä½œå°±å®Œæˆäº†ã€‚</p><figure><img src="https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/minheap-dequeue-element-5-over.png" alt="å¼¹å‡ºæ ˆé¡¶å…ƒç´ å" tabindex="0"><figcaption>å¼¹å‡ºæ ˆé¡¶å…ƒç´ å</figcaption></figure><p>æ‰€ä»¥æˆ‘ä»¬çš„å‡ºé˜Ÿæ“ä½œçš„ä»£ç ä¹Ÿå®ç°äº†ï¼Œè¿™é‡Œçš„æ“ä½œæ­¥éª¤å’Œæè¿°å·®ä¸å¤šï¼Œå”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯æ¯”è¾ƒçš„æ—¶å€™æ³¨æ„åˆ¤æ–­å·¦å³å­èŠ‚ç‚¹ç´¢å¼•è®¡ç®—æ—¶å¿…é¡»å°äºæ•°ç»„å¤§å°ï¼Œé¿å…è¶Šç•Œé—®é¢˜ã€‚</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * è·å–å°é¡¶å †å †é¡¶çš„å…ƒç´ 
 */</span>
<span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>list <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> list<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">E</span> ret <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    list<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    list<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">siftDown</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token doc-comment comment">/**
 * å°†æ•°ç»„è½¬ä¸ºå †
 */</span>
<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">heapify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//æ‰¾åˆ°æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹,å¾€å‰éå†</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token function">parentIndex</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//å¯¹æ¯ä¸ªéå¶å­èŠ‚ç‚¹æ‰§è¡ŒsiftDown,ä½¿å…¶èŒƒå›´å†…ä¿æŒå°é¡¶å †ç‰¹æ€§</span>
        <span class="token function">siftDown</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>    

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">siftDown</span><span class="token punctuation">(</span><span class="token keyword">int</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>comparator <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//å¦‚æœå·¦èŠ‚ç‚¹å°äºæ•°ç»„å¤§å°æ‰è¿›å…¥å¾ªç¯ï¼Œé¿å…æ•°ç»„è¶Šç•Œ</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">leftIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token operator">&lt;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//è·å–å·¦ç´¢å¼•</span>
            <span class="token keyword">int</span> cmpIdx <span class="token operator">=</span> <span class="token function">leftIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//è·å–å·¦æˆ–è€…å³å­èŠ‚ç‚¹ä¸­å€¼æ›´å°çš„ç´¢å¼•</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">rightIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token operator">&lt;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
                    comparator<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token function">leftIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token function">rightIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                cmpIdx <span class="token operator">=</span> <span class="token function">rightIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">//å¦‚æœçˆ¶èŠ‚ç‚¹æ¯”å­èŠ‚ç‚¹å°åˆ™åœæ­¢æ¯”è¾ƒï¼Œç»“æŸå¾ªç¯</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>comparator<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">,</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>cmpIdx<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">//åä¹‹äº¤æ¢ä½ç½®ï¼Œå°†indexæ›´æ–°ä¸ºäº¤æ¢åçš„ç´¢å¼•indexï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªå¾ªç¯</span>
            <span class="token class-name">E</span> tmpElement <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>cmpIdx<span class="token punctuation">)</span><span class="token punctuation">;</span>
            list<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>cmpIdx<span class="token punctuation">,</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            list<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> tmpElement<span class="token punctuation">)</span><span class="token punctuation">;</span>


            index <span class="token operator">=</span> cmpIdx<span class="token punctuation">;</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">//å¦‚æœå·¦èŠ‚ç‚¹å°äºæ•°ç»„å¤§å°æ‰è¿›å…¥å¾ªç¯ï¼Œé¿å…æ•°ç»„è¶Šç•Œ</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">leftIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token operator">&lt;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//è·å–å·¦ç´¢å¼•</span>
            <span class="token keyword">int</span> cmpIdx <span class="token operator">=</span> <span class="token function">leftIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//è·å–å·¦æˆ–è€…å³å­èŠ‚ç‚¹ä¸­å€¼æ›´å°çš„ç´¢å¼•</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">rightIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token operator">&lt;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
                    <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">)</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token function">leftIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token function">rightIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                cmpIdx <span class="token operator">=</span> <span class="token function">rightIndex</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">//å¦‚æœçˆ¶èŠ‚ç‚¹æ¯”å­èŠ‚ç‚¹å°åˆ™åœæ­¢æ¯”è¾ƒï¼Œç»“æŸå¾ªç¯</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Comparable</span><span class="token punctuation">)</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compareTo</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>cmpIdx<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">//åä¹‹äº¤æ¢ä½ç½®ï¼Œå°†indexæ›´æ–°ä¸ºäº¤æ¢åçš„ç´¢å¼•indexï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªå¾ªç¯</span>
            <span class="token class-name">E</span> tmpElement <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>cmpIdx<span class="token punctuation">)</span><span class="token punctuation">;</span>
            list<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>cmpIdx<span class="token punctuation">,</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            list<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> tmpElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
            index <span class="token operator">=</span> cmpIdx<span class="token punctuation">;</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>


<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‡å¦‚æˆ‘ä»¬ç°åœ¨æœ‰ä¸‹é¢è¿™æ ·ä¸€ä¸ªæ•°ç»„ï¼Œæˆ‘ä»¬å¸Œæœ›å¯ä»¥å°†å…¶è½¬æ¢ä¸ºä¼˜å…ˆé˜Ÿåˆ—ï¼Œè¦å¦‚ä½•åšåˆ°å‘¢ï¼Ÿä½ ä¸€å®šè§‰å¾—ï¼Œæˆ‘ä»¬éå†æ•°ç»„å°†å…ƒç´ ä¸€ä¸ªä¸ªæŠ•å…¥åˆ°å †ä¸­å³å¯ï¼Œè¿™æ ·åšè™½ç„¶æ–¹ä¾¿ï¼Œä½†æ˜¯äº‹ä»¶å¤æ‚åº¦å´æ˜¯ O(n log n),æ‰€ä»¥ç¬”è€…ç°åœ¨å°±è¦ä»‹ç»å‡ºä¸€ç§å¤æ‚åº¦ä¸º O(n)çš„æ–¹æ³•â€”â€”<code>heapify</code>ã€‚</p><figure><img src="https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/minheap-array.png" alt="" tabindex="0"><figcaption></figcaption></figure><p><code>heapify</code> åšæ³•å¾ˆç®€å•ï¼Œå³ä»å †çš„æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹éå†æ¯ä¸€ä¸ªéå¶å­èŠ‚ç‚¹ï¼Œè®©è¿™äº›éå¶å­èŠ‚ç‚¹ä¸æ–­è¿›è¡Œ <code>siftDown</code> æ“ä½œï¼Œç›´åˆ°æ ¹èŠ‚ç‚¹å®Œæˆ <code>siftDown</code> ä»è€Œå®ç°å¿«é€Ÿå®Œæˆå°é¡¶å †çš„åˆ›å»ºã€‚</p><p>å°±ä»¥ä¸Šé¢çš„æ•°ç»„ä¸ºä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬è‡ªä¸Šè€Œä¸‹ã€è‡ªä½œå‘å³å°†å…¶çœ‹ä½œä¸€ä¸ªå°é¡¶å †ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸‹é¢è¿™å¼ å›¾çš„æ ·å­ã€‚</p><figure><img src="https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/minheap-array-tree.png" alt="æ•°ç»„å¯¹åº”çš„å †" tabindex="0"><figcaption>æ•°ç»„å¯¹åº”çš„å †</figcaption></figure><p>é¦–å…ˆæˆ‘ä»¬æ‰¾åˆ°æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹ï¼Œè·å–æ–¹å¼å¾ˆç®€å•ï¼Œä¸Šæ–‡è¯´åˆ°è¿‡äºŒå‰å †æ˜¯ä¸€ä¸ªå…¸å‹çš„å®Œå…¨äºŒå‰æ ‘ï¼Œå‡è®¾æœ€åä¸€ä¸ªå¶å­èŠ‚ç‚¹ï¼Œå³æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ä¸º <code>childIndex</code> ã€‚</p><p>åˆ™æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢è¿™ä¸ªå…¬å¼å¾—å‡ºæœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹:</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">int</span> parentIndex<span class="token operator">=</span><span class="token punctuation">(</span>childIndex <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰å‘¢ï¼Ÿè¯´ç™½äº†å°±æ˜¯æˆ‘ä»¬ä¸Šæ–‡å®ç°çš„ <code>parentIndex</code> æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬å®šä½åˆ°äº† 23ï¼Œç„¶å 23 è¿™ä¸ªèŠ‚ç‚¹è°ƒç”¨ <code>siftDown</code> æ–¹æ³•ï¼ŒæŸ¥çœ‹å·¦å³èŠ‚ç‚¹ä¸­æœ‰æ²¡æœ‰æ¯”å®ƒæ›´å°çš„èŠ‚ç‚¹ï¼Œç„¶åå®Œæˆäº¤æ¢ï¼Œåœ¨å¯¹æ¯”è¿‡ç¨‹ä¸­å‘ç°å¹¶æ²¡æœ‰ï¼Œäºæ˜¯æˆ‘ä»¬å†å¾€å‰æ¨è¿›ï¼Œæ‰¾åˆ°åˆ°æ•°ç¬¬äºŒä¸ªéå¶å­èŠ‚ç‚¹ 14ï¼Œå‘ç° 14 çš„å¶å­èŠ‚ç‚¹ä¹Ÿéƒ½æ¯” 14 å¤§ï¼Œæ‰€ä»¥ <code>siftDown</code> æ²¡æœ‰è¿›è¡Œä»»ä½•æ“ä½œï¼Œæˆ‘ä»¬å†æ¬¡å¾€å‰æ¨è¿›ã€‚</p><p>æœ€ç»ˆæˆ‘ä»¬æ¥åˆ°çš„ 20ï¼Œå¯¹ 20 è¿›è¡Œ <code>siftDown</code>ï¼Œç»“æœå‘ç° 17 æ¯” 20 å°ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†è¿™ä¸ªä¸¤ä¸ªèŠ‚ç‚¹è¿›è¡Œäº¤æ¢,äº¤æ¢å®Œæˆä¹‹å 20 åˆ°äº†å¶å­èŠ‚ç‚¹ï¼Œæ²¡æœ‰éœ€è¦è¿›è¡Œæ¯”è¾ƒçš„å­èŠ‚ç‚¹ï¼Œæœ¬æ¬¡ <code>siftDown</code> ç»“æŸã€‚</p><figure><img src="https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/minheap-array-tree-siftdown1.png" alt="ç¬¬ä¸€æ¬¡ siftDown" tabindex="0"><figcaption>ç¬¬ä¸€æ¬¡ siftDown</figcaption></figure><p>ç»§ç»­å‘å‰æ¨è¿›ï¼Œå‘ç° 18 çš„å·¦å­èŠ‚ç‚¹æ¯” 18 å°ï¼Œæˆ‘ä»¬å¯¹å…¶è¿›è¡Œä½ç½®äº¤æ¢ï¼Œç´§æ¥ç€ 18 æ¥åˆ°çš„æ–°ä½ç½®ï¼Œå‘ç°ä¸¤ä¸ªå­èŠ‚ç‚¹éƒ½æ¯” 18 å¤§ï¼ŒsiftDown ç»“æŸã€‚</p><figure><img src="https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/minheap-array-tree-siftdown2.png" alt="ç¬¬äºŒæ¬¡ siftDown" tabindex="0"><figcaption>ç¬¬äºŒæ¬¡ siftDown</figcaption></figure><p>æœ€ç»ˆæˆ‘ä»¬æ¥åˆ°äº†æ ¹èŠ‚ç‚¹ 16ï¼Œå‘ç°å·¦å­èŠ‚ç‚¹ 14 æ¯”å®ƒå°ï¼Œè¿›è¡Œä½ç½®äº¤æ¢ï¼Œç„¶å 16 æ¥åˆ°çš„æ–°ä½ç½®ï¼Œå‘ç°å­èŠ‚ç‚¹éƒ½æ¯”å®ƒå¤§ï¼Œè‡ªæ­¤æ•°ç»„å˜ä¸ºä¸€ä¸ªæ ‡å‡†çš„å°é¡¶å †ã€‚</p><figure><img src="https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/minheap-array-tree-siftdown3.png" alt="ç¬¬ä¸‰æ¬¡ siftDown" tabindex="0"><figcaption>ç¬¬ä¸‰æ¬¡ siftDown</figcaption></figure><p>äº†è§£äº†æ•´ä¸ªè¿‡ç¨‹ä¹‹åï¼Œæˆ‘ä»¬çš„ç¼–ç å·¥ä½œå°±å˜å¾—å¾ˆç®€å•äº†ï¼Œä»æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¾€å‰éå†åˆ°æ ¹èŠ‚ç‚¹ï¼Œä¸æ–­æ‰§è¡Œ <code>siftDown</code>ï¼Œè¿™äº›éƒ½æ˜¯æˆ‘ä»¬ç°æœ‰çš„æ–¹æ³•æ‰€ä»¥å®ç°èµ·æ¥å°±å¾ˆæ–¹ä¾¿äº†ã€‚</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * å°†æ•°ç»„è½¬ä¸ºå †
 */</span>
<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">heapify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//æ‰¾åˆ°æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹,å¾€å‰éå†</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token function">parentIndex</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//å¯¹æ¯ä¸ªéå¶å­èŠ‚ç‚¹æ‰§è¡ŒsiftDown,ä½¿å…¶èŒƒå›´å†…ä¿æŒå°é¡¶å †ç‰¹æ€§</span>
        <span class="token function">siftDown</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åï¼Œæˆ‘ä»¬å†æ·»åŠ ä¸€ä¸ªæŸ¥çœ‹å †é¡¶çš„å…ƒç´ ä½†ä¸ç§»é™¤çš„æ–¹æ³• <code>peek()</code>ã€‚</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>list <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> list<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æµ‹è¯•" tabindex="-1"><a class="header-anchor" href="#æµ‹è¯•"><span>æµ‹è¯•</span></a></h4><p>ä¸ºäº†éªŒè¯ç¬”è€…å°é¡¶å †å„ä¸ªæ“ä½œçš„æ­£ç¡®æ€§ï¼Œç¬”è€…ç¼–å†™äº†ä¸‹é¢è¿™æ ·ä¸€æ®µæµ‹è¯•ä»£ç ï¼Œé¦–å…ˆéšæœºç”Ÿæˆ 1000w ä¸ªæ•°æ®å­˜åˆ°å°é¡¶å †ä¸­ï¼Œç„¶åè¿›è¡Œå‡ºé˜Ÿå¹¶å°†å…ƒç´ å­˜åˆ°æ–°æ•°ç»„ä¸­ï¼Œè¿›è¡Œéå†å¦‚æœå‰ä¸€ä¸ªå…ƒç´ æ¯”åä¸€ä¸ªå…ƒç´ å¤§ï¼Œåˆ™è¯´æ˜æˆ‘ä»¬çš„å°é¡¶å †å®ç°çš„æœ‰é—®é¢˜ã€‚</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">1000_0000</span><span class="token punctuation">;</span>

<span class="token class-name">MinHeap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> heap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MinHeap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token class-name">Comparator</span><span class="token punctuation">.</span><span class="token function">comparingInt</span><span class="token punctuation">(</span>a <span class="token operator">-&gt;</span> a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//å¾€å †ä¸­éšæœºå­˜æ”¾1000wä¸ªå…ƒç´ </span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    heap<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">ThreadLocalRandom</span><span class="token punctuation">.</span><span class="token function">current</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">//è¿›è¡Œå‡ºé˜Ÿæ“ä½œï¼Œå¹¶å°†å…ƒç´ å­˜åˆ°æ•°ç»„ä¸­</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> heap<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//å¾ªç¯éå†ï¼Œå¦‚æœå‰ä¸€ä¸ªå…ƒç´ æ¯”åä¸€ä¸ªå…ƒç´ å¤§ï¼Œåˆ™è¯´æ˜æˆ‘ä»¬çš„å°é¡¶å †æœ‰é—®é¢˜</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;err heap&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®Œæ•´æºç åœ°å€ï¼š<a href="https://github.com/Snailclimb/java-code-demo/blob/main/src/main/java/cn/javaguide/datastructures/priorityqueue/MinHeap.java" target="_blank" rel="noopener noreferrer">https://github.com/Snailclimb/java-code-demo/blob/main/src/main/java/cn/javaguide/datastructures/priorityqueue/MinHeap.java<!----></a> ã€‚</p><h4 id="å°ç»“" tabindex="-1"><a class="header-anchor" href="#å°ç»“"><span>å°ç»“</span></a></h4><p>è‡ªæ­¤æˆ‘ä»¬ä¾¿å®Œæˆäº†ä¸€ä¸ªäºŒå‰å †çš„å®ç°ï¼Œå®ƒçš„å…¥é˜Ÿå’Œå‡ºé˜Ÿæ“ä½œçš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(log n)ï¼Œè€ŒæŸ¥è¯¢å †é¡¶å…ƒç´ çš„å¤æ‚åº¦åˆ™æ˜¯ O(1);æ­£æ˜¯è¿™ç§å‡ºè‰²çš„ä¸”å‡è¡¡çš„å‡ºé˜Ÿæ•ˆç‡ï¼Œä½¿å¾— JDK ä¼˜å…ˆé˜Ÿåˆ—çš„å®ç°é‡‡ç”¨çš„ä¾¿æ˜¯äºŒå‰å †çš„æ€æƒ³ï¼Œè€Œä¸æ˜¯æ™®é€šæ•°ç»„æ’å…¥ç„¶åæŒ‰ç…§ä¼˜å…ˆé˜Ÿåˆ—è¿›è¡Œæ’åºç­‰æ–¹æ¡ˆã€‚</p><h3 id="åŸºäºäºŒå‰å †å®ç°ä¸€ä¸ª-priorityqueue" tabindex="-1"><a class="header-anchor" href="#åŸºäºäºŒå‰å †å®ç°ä¸€ä¸ª-priorityqueue"><span>åŸºäºäºŒå‰å †å®ç°ä¸€ä¸ª PriorityQueue</span></a></h3><p>ä¸Šæ–‡ä¸­æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªå°é¡¶å †ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥åŸºäºè¿™ä¸ªå°é¡¶å †å®ç°ä¸€ä¸ªç±»ä¼¼äºçš„ JDK çš„ä¼˜å…ˆé˜Ÿåˆ— <code>PriorityQueue</code>ã€‚</p><p>åœ¨å®ç°ä¼˜å…ˆé˜Ÿåˆ—ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªé˜Ÿåˆ—æ¥å£ <code>Queue&lt;E&gt; </code>ç¡®å®šä¸€ä¸‹ä¼˜å…ˆé˜Ÿåˆ—æ‰€éœ€è¦å…·å¤‡çš„è¡Œä¸ºã€‚</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * è·å–å½“å‰é˜Ÿåˆ—å¤§å°
     */</span>
    <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * åˆ¤æ–­å½“å‰é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º
     */</span>
    <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * æ·»åŠ å…ƒç´ åˆ°ä¼˜å…ˆé˜Ÿåˆ—ä¸­
     */</span>
    <span class="token keyword">boolean</span> <span class="token function">offer</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * è¿”å›ä¼˜å…ˆé˜Ÿåˆ—ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ,å¦‚æœé˜Ÿåˆ—ä¸å­˜åœ¨å…ƒç´ åˆ™ç›´æ¥è¿”å›ç©º
     */</span>
    <span class="token class-name">E</span> <span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * æŸ¥çœ‹ä¼˜å…ˆé˜Ÿåˆ—å †é¡¶å…ƒç´ ,å¦‚æœé˜Ÿåˆ—ä¸ºç©ºåˆ™è¿”å›ç©º
     */</span>
    <span class="token class-name">E</span> <span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¡®å®šäº†é˜Ÿåˆ—åº”è¯¥å…·å¤‡çš„è¡Œä¸ºä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åŸºäºäºŒå‰å †å®ç°ä¼˜å…ˆé˜Ÿåˆ—äº†ï¼Œç”±äºä¼˜å…ˆçº§å…³ç³»çš„ç»´æŠ¤æˆ‘ä»¬å·²ç»ç”¨äºŒå‰å †å®ç°äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ <code>PriorityQueue</code> å®ç°ä¹Ÿåªéœ€å¯¹äºŒå‰å †è¿›è¡Œä¸€ä¸ªç®€å•çš„å°è£…å³å¯ã€‚</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span> <span class="token keyword">extends</span> <span class="token class-name">Comparable</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">Queue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">MinHeap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">;</span>


    <span class="token keyword">public</span> <span class="token class-name">PriorityQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MinHeap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">PriorityQueue</span><span class="token punctuation">(</span><span class="token class-name">Comparator</span> comparator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MinHeap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>comparator<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> data<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> data<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">offer</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        data<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> data<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> data<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬çš„æµ‹è¯•ä»£ç å¾ˆç®€å•ï¼Œå› ä¸ºæˆ‘ä»¬ä¼˜å…ˆé˜Ÿåˆ—åº•å±‚é‡‡ç”¨çš„æ˜¯å°é¡¶å †ï¼Œæ‰€ä»¥æˆ‘ä»¬éšæœºåœ¨ä¼˜å…ˆé˜Ÿåˆ—ä¸­å­˜æ”¾ 1000w æ¡æ•°æ®ï¼Œç„¶åä½¿ç”¨ poll å–å‡ºå¹¶å­˜åˆ°æ•°ç»„ä¸­ï¼Œå› ä¸ºä¼˜å…ˆé˜Ÿåˆ—åº•å±‚å®ç°ç”¨çš„æ˜¯å°é¡¶å †ï¼Œæ‰€ä»¥å‡å¦‚æˆ‘ä»¬çš„æ•°ç»„å‰ä¸€ä¸ªå…ƒç´ å¤§äºåä¸€ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬å³å¯è¯´æ˜è¿™ä¸ªä¼˜å…ˆé˜Ÿåˆ—ä¼˜å…ˆçº§æ’åˆ—æœ‰é—®é¢˜ï¼Œåä¹‹åˆ™è¯´æ˜æˆ‘ä»¬çš„ä¼˜å…ˆé˜Ÿåˆ—æ˜¯å®ç°æ˜¯æ­£ç¡®çš„ã€‚</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">//å¾€é˜Ÿåˆ—ä¸­éšæœºæ·»åŠ 1000_0000æ¡æ•°æ®</span>
<span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> priorityQueue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">1000_0000</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    priorityQueue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span><span class="token class-name">ThreadLocalRandom</span><span class="token punctuation">.</span><span class="token function">current</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//å°†ä¼˜å…ˆé˜Ÿåˆ—ä¸­çš„æ•°æ®æŒ‰ç…§ä¼˜å…ˆçº§å–å‡ºå¹¶å­˜åˆ°æ•°ç»„ä¸­</span>
<span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> priorityQueue<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//å¦‚æœå‰ä¸€ä¸ªå…ƒç´ å¤§äºåä¸€ä¸ªå…ƒç´ ,åˆ™è¯´æ˜ä¼˜å…ˆé˜Ÿåˆ—ä¼˜å…ˆçº§æ’åˆ—æœ‰é—®é¢˜</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;error PriorityQueue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="jdk-è‡ªå¸¦-priorityqueue-ä½¿ç”¨ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#jdk-è‡ªå¸¦-priorityqueue-ä½¿ç”¨ç¤ºä¾‹"><span>JDK è‡ªå¸¦ PriorityQueue ä½¿ç”¨ç¤ºä¾‹</span></a></h2><p>æœ‰äº†æ‰‹å†™ <code>PriorityQueue</code> çš„ç»éªŒä¹‹åï¼Œæˆ‘ä»¬å¯¹ <code>PriorityQueue</code> å·²ç»æœ‰äº†ä¸é”™çš„æŒæ¡ï¼Œæ‰€ä»¥åœ¨é˜…è¯» <code>PriorityQueue</code> æºç å‰ï¼Œæˆ‘ä»¬ä¸å¦¨ä»‹ç»ä¸€ä¸ª <code>PriorityQueue</code> çš„ä½¿ç”¨ç¤ºä¾‹äº†è§£ä¸€ä¸‹ JDK çš„ <code>PriorityQueue</code>ã€‚</p><h3 id="åŸºæœ¬ç±»å‹ä¼˜å…ˆé˜Ÿåˆ—" tabindex="-1"><a class="header-anchor" href="#åŸºæœ¬ç±»å‹ä¼˜å…ˆé˜Ÿåˆ—"><span>åŸºæœ¬ç±»å‹ä¼˜å…ˆé˜Ÿåˆ—</span></a></h3><p>ç¬¬ä¸€ä¸ªä¾‹å­å…¶å®å’Œæˆ‘ä»¬æ‰‹å†™çš„æµ‹è¯•ä»£ç æ˜¯ä¸€æ ·çš„ï¼Œå¯ä»¥çœ‹å‡ºç¬”è€…é™¤äº†æ·»åŠ ä¸€ä¸ªå¼•åŒ…é€»è¾‘ä»¥å¤–ï¼Œå¹¶æ²¡æœ‰å¯¹ä»£ç åšä»»ä½•æ”¹åŠ¨ï¼Œä»æµ‹è¯•ç»“æœæ¥çœ‹ JDK çš„ PriorityQueue ä¸­çš„å…ƒç´ ä¹Ÿæ˜¯æŒ‰ç…§å‡åºè¿›è¡Œä¼˜å…ˆçº§æ’åˆ—çš„ã€‚</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">PriorityQueue</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>


    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//å¾€é˜Ÿåˆ—ä¸­éšæœºæ·»åŠ 1000_0000æ¡æ•°æ®</span>
        <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> priorityQueue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">1000_0000</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            priorityQueue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span><span class="token class-name">RandomUtil</span><span class="token punctuation">.</span><span class="token function">randomInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//å°†ä¼˜å…ˆé˜Ÿåˆ—ä¸­çš„æ•°æ®æŒ‰ç…§ä¼˜å…ˆçº§å–å‡ºå¹¶å­˜åˆ°æ•°ç»„ä¸­</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> priorityQueue<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//å¦‚æœå‰ä¸€ä¸ªå…ƒç´ å¤§äºåä¸€ä¸ªå…ƒç´ ,åˆ™è¯´æ˜ä¼˜å…ˆé˜Ÿåˆ—ä¼˜å…ˆçº§æ’åˆ—æœ‰é—®é¢˜</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;error PriorityQueue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç‰¹æ®Šç±»å‹ä¼˜å…ˆé˜Ÿåˆ—" tabindex="-1"><a class="header-anchor" href="#ç‰¹æ®Šç±»å‹ä¼˜å…ˆé˜Ÿåˆ—"><span>ç‰¹æ®Šç±»å‹ä¼˜å…ˆé˜Ÿåˆ—</span></a></h3><p>å‡å¦‚æˆ‘ä»¬å¸Œæœ›å°†è‡ªå®šä¹‰çš„å¯¹è±¡å­˜æ”¾åˆ°ä¼˜å…ˆé˜Ÿåˆ—ä¸­ï¼Œå¹¶ä¸”æˆ‘ä»¬å¸Œæœ›ä¼˜å…ˆçº§æŒ‰ç…§å¹´é¾„è¿›è¡Œå‡åºæ’åºï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ JDK çš„ä¼˜å…ˆé˜Ÿåˆ—ã€‚ é€šè¿‡æŒ‡æ˜é˜Ÿåˆ—çš„æ³›å‹ä»¥åŠæ¯”è¾ƒå™¨ï¼Œæˆ‘ä»¬å³å¯éå¸¸æ–¹ä¾¿çš„å®ç°ä¸€ä¸ªå­˜æ”¾è‡ªå®šä¹‰å¯¹è±¡çš„ä¼˜å…ˆé˜Ÿåˆ—ã€‚</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Example</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> name<span class="token punctuation">;</span>
        <span class="token keyword">int</span> age<span class="token punctuation">;</span>

        <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> age<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> name<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> age<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">&gt;</span></span> pq <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token punctuation">.</span><span class="token function">comparing</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token operator">::</span><span class="token function">getAge</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pq<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;Alice&quot;</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pq<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;Bob&quot;</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pq<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;Charlie&quot;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>pq<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Person</span> p <span class="token operator">=</span> pq<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; (&quot;</span> <span class="token operator">+</span> p<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="jdk-è‡ªå¸¦-priorityqueue-æºç åˆ†æ" tabindex="-1"><a class="header-anchor" href="#jdk-è‡ªå¸¦-priorityqueue-æºç åˆ†æ"><span>JDK è‡ªå¸¦ PriorityQueue æºç åˆ†æ</span></a></h2><h3 id="æ„é€ å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#æ„é€ å‡½æ•°"><span>æ„é€ å‡½æ•°</span></a></h3><p>æœ‰äº†å‰é¢æ‰‹å†™ <code>PriorityQueue</code> ä»¥åŠ <code>PriorityQueue</code> ä½¿ç”¨ç»éªŒä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ·±å…¥é˜…è¯» <code>PriorityQueue</code> æºç äº†ã€‚</p><p>åˆ†ææºç æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆçœ‹çœ‹æ„é€ å‡½æ•°äº†è§£ä¸€ä¸‹è¿™ä¸ªç±»çš„å¤§æ¦‚ï¼Œç”±äº <code>PriorityQueue</code> æ„é€ æ–¹æ³•å¤§éƒ¨åˆ†å­˜åœ¨å¤ç”¨ï¼Œæ‰€ä»¥ç¬”è€…æ‰¾åˆ°äº†å‡ ä¸ªæœ€æ ¸å¿ƒçš„æ„é€ æ–¹æ³•ã€‚</p><p>å…ˆæ¥çœ‹çœ‹è¿™ä¸ªä¼ å…¥æ•°ç»„å®¹é‡ <code>initialCapacity</code> å’Œæ¯”è¾ƒå™¨çš„æ„é€ æ–¹æ³•ï¼Œå¯ä»¥çœ‹åˆ° <code>PriorityQueue</code> çš„æ„é€ æ–¹æ³•è¦æ±‚ç”¨æˆ·ä¼ å…¥ä¸€ä¸ª <code>initialCapacity</code> ç”¨äºåˆå§‹åŒ–ä¸€ä¸ªæ•°ç»„ <code>queue</code>ï¼Œä¸éš¾çŒœå‡ºè¿™ä¸ªæ•°ç»„å°±æ˜¯ä¼˜å…ˆé˜Ÿåˆ—åº•å±‚æ‰€ç”¨åˆ°çš„äºŒå‰å°é¡¶å †ã€‚</p><p>åŒæ—¶è¯¥æ„é€ æ–¹æ³•è¿˜è¦æ±‚ç”¨æˆ·ä¼ å…¥ä¸€ä¸ª <code>comparator</code> å³ä¸€ä¸ªæ¯”è¾ƒå™¨ï¼Œè¯´æ˜ <code>queue</code> çš„å…ƒç´ åœ¨è¿›è¡Œå…¥é˜Ÿæ“ä½œæ—¶æ˜¯éœ€è¦æ¯”è¾ƒçš„ï¼Œè€Œè¿™ä¸ª <code>comparator</code> å°±æ˜¯æ¯”è¾ƒçš„ä¾æ®ã€‚</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">PriorityQueue</span><span class="token punctuation">(</span><span class="token keyword">int</span> initialCapacity<span class="token punctuation">,</span>
                         <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> comparator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//å¦‚æœåˆå§‹åŒ–å®¹é‡å°äº1åˆ™æŠ›å‡ºå¼‚å¸¸</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>initialCapacity <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>initialCapacity<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>comparator <span class="token operator">=</span> comparator<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†æ¥çœ‹çœ‹å¦ä¸€ä¸ªæ ¸å¿ƒæ„é€ æ–¹æ³•ï¼Œæˆ‘ä»¬å‘ç° PriorityQueue æ”¯æŒå°†ä¸åŒçš„ Collection ç±»è½¬ä¸º PriorityQueueï¼Œå¯¹æ­¤æˆ‘ä»¬ä¸å¦¨å¯¹æ¯ä¸€æ®µé€»è¾‘è¿›è¡Œæ·±å…¥åˆ†æã€‚</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">PriorityQueue</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//SortedSetç±»å‹çš„é›†åˆè½¬ä¸ºPriorityQueueï¼Œä»SortedSetä¸­è·å–ä¸€ä¸ªæ¯”è¾ƒå™¨è¿›è¡Œåˆå§‹åŒ–ï¼Œç„¶åæŒ‰ç…§æ¯”è¾ƒå™¨çš„è§„åˆ™è½¬ç§»å…ƒç´ åˆ°PriorityQueueä¸­</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token keyword">instanceof</span> <span class="token class-name">SortedSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">SortedSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> ss <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SortedSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> c<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>comparator <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> ss<span class="token punctuation">.</span><span class="token function">comparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">initElementsFromCollection</span><span class="token punctuation">(</span>ss<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//å¦‚æœé›†åˆç±»å‹æ˜¯PriorityQueueåˆ™è·å–PriorityQueueçš„æ¯”è¾ƒå™¨ï¼Œå¹¶å°†PriorityQueueçš„å…ƒç´ è½¬ç§»åˆ°æˆ‘ä»¬çš„PriorityQueueä¸­</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token keyword">instanceof</span> <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> pq <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> c<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>comparator <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> pq<span class="token punctuation">.</span><span class="token function">comparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">initFromPriorityQueue</span><span class="token punctuation">(</span>pq<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>comparator <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token function">initFromCollection</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“é›†åˆç±»å‹ä¸º <code>SortedSet</code> æ—¶ï¼Œå› ä¸º <code>SortedSet</code> æ˜¯å¤©ç”Ÿæœ‰åºçš„ï¼Œæ‰€ä»¥ <code>PriorityQueue</code> ç›´æ¥è·å–å…¶æ¯”è¾ƒå™¨ä¹‹åï¼Œè°ƒç”¨äº†ä¸€ä¸ª <code>initElementsFromCollection</code>ï¼Œæˆ‘ä»¬ä¸å¦¨çœ‹çœ‹ <code>initElementsFromCollection</code> å…·ä½“åšäº†äº›ä»€ä¹ˆã€‚</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">//SortedSetç±»å‹çš„é›†åˆè½¬ä¸ºPriorityQueueï¼Œä»SortedSetä¸­è·å–ä¸€ä¸ªæ¯”è¾ƒå™¨è¿›è¡Œåˆå§‹åŒ–ï¼Œç„¶åæŒ‰ç…§æ¯”è¾ƒå™¨çš„è§„åˆ™è½¬ç§»å…ƒç´ åˆ°PriorityQueueä¸­</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token keyword">instanceof</span> <span class="token class-name">SortedSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">SortedSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> ss <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SortedSet</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> c<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>comparator <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> ss<span class="token punctuation">.</span><span class="token function">comparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">initElementsFromCollection</span><span class="token punctuation">(</span>ss<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ° <code>initElementsFromCollection</code> åªä¸è¿‡æ˜¯å°†é›†åˆå…ƒç´ è½¬ä¸ºæ•°ç»„ï¼Œç„¶åèµ‹å€¼ç»™ä¼˜å…ˆé˜Ÿåˆ—åº•å±‚çš„æ•°ç»„æˆå‘˜å˜é‡ queueã€‚<code>å½“</code> a æ•°ç»„æœªèƒ½è¿”å›ä¸€ä¸ª <code>Object[]</code>ç±»å‹æ—¶ï¼Œåˆ™è°ƒç”¨ <code>Arrays.copyOf</code> æ–¹æ³•å°†å…¶è½¬ä¸ºä¸ºä¸€ä¸ªæ­£ç¡®çš„ <code>Object[]</code>æ•°ç»„ã€‚ ç„¶åéå†å…ƒç´ è¿›è¡Œåˆ¤ç©ºï¼Œä¸€åˆ‡æ­£å¸¸åˆ™å°†å…¶èµ‹å€¼ç»™ <code>queue</code>ï¼Œå¹¶è®°å½•æ­¤æ—¶ <code>queue</code> çš„é•¿åº¦ã€‚</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">initElementsFromCollection</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// If c.toArray incorrectly doesn&#39;t return Object[], copy it.</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
            a <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">copyOf</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> a<span class="token punctuation">.</span>length<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>comparator <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>queue <span class="token operator">=</span> a<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> a<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å†æ¥çœ‹çœ‹ <code>PriorityQueue</code> é›†åˆä¼ å…¥æ—¶çš„å¤„ç†é€»è¾‘ï¼ŒåŒæ ·çš„å°† <code>PriorityQueue</code> çš„æ¯”è¾ƒå™¨èµ‹å€¼ç»™å½“å‰ <code>PriorityQueue</code> ä¹‹åï¼Œè°ƒç”¨äº†ä¸€ä¸ª <code>initFromPriorityQueue</code> æ–¹æ³•ï¼Œæˆ‘ä»¬æ­¥å…¥çœ‹çœ‹ã€‚</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code> <span class="token comment">//å¦‚æœé›†åˆç±»å‹æ˜¯PriorityQueueåˆ™è·å–PriorityQueueçš„æ¯”è¾ƒå™¨ï¼Œå¹¶å°†PriorityQueueçš„å…ƒç´ è½¬ç§»åˆ°æˆ‘ä»¬çš„PriorityQueueä¸­</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token keyword">instanceof</span> <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> pq <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> c<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>comparator <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> pq<span class="token punctuation">.</span><span class="token function">comparator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">initFromPriorityQueue</span><span class="token punctuation">(</span>pq<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ° <code>initFromPriorityQueue</code> æ“ä½œå°±æ˜¯è®©ä¼ å…¥çš„ <code>PriorityQueue</code> é€šè¿‡ <code>toArray</code> è¿”å›åº•å±‚çš„å°é¡¶å †æ•°ç»„ï¼Œç„¶åèµ‹å€¼ç»™æˆ‘ä»¬çš„ <code>PriorityQueue</code>ï¼Œåœ¨è®°å½•ä¸€ä¸‹å½“å‰ <code>PriorityQueue</code> çš„é•¿åº¦ã€‚</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">initFromPriorityQueue</span><span class="token punctuation">(</span><span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">PriorityQueue</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>queue <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>size <span class="token operator">=</span> c<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
           <span class="token comment">//ç•¥</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹äºä¸€èˆ¬é›†åˆï¼Œæˆ‘ä»¬çš„é€»è¾‘ä¼šèµ°åˆ°è¿™é‡Œï¼Œé»˜è®¤è®¾ç½®æ¯”è¾ƒå™¨ä¸ºç©ºï¼Œç„¶åä¹Ÿè°ƒç”¨äº† <code>initFromCollection</code>ï¼Œæˆ‘ä»¬æ­¥å…¥æŸ¥çœ‹é€»è¾‘ã€‚</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>comparator <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token function">initFromCollection</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹äºé <code>PriorityQueue</code> çš„é›†åˆï¼Œå®ƒè°ƒç”¨äº† <code>initFromCollection</code>ï¼Œæˆ‘ä»¬æ­¥å…¥çœ‹çœ‹ã€‚</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">initFromPriorityQueue</span><span class="token punctuation">(</span><span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>c<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">PriorityQueue</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">//ç•¥</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token function">initFromCollection</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°å®ƒçš„å®ç°å°±æ˜¯è°ƒç”¨ä¸Šæ–‡æ‰€ä»‹ç»çš„ <code>initElementsFromCollection</code> å°†æ•°ç»„å­˜åˆ° <code>queue</code> ä¸­ï¼Œç„¶åè°ƒç”¨ä¸€ä¸ª <code>heapify</code> å°†è¿™ä¸ªæ•°ç»„è½¬ä¸ºå°é¡¶å †ã€‚</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code> <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">initFromCollection</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">E</span><span class="token punctuation">&gt;</span></span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">initElementsFromCollection</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">heapify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹äº JDK å®ç°çš„ <code>heapify</code>ï¼Œå¯ä»¥å‘ç°å®ƒçš„é€»è¾‘å’Œæˆ‘ä»¬æ‰€å®ç°çš„å·®ä¸å¤šï¼Œåªä¸è¿‡è·å–çˆ¶èŠ‚ç‚¹çš„æ“ä½œä½¿ç”¨äº†é«˜æ•ˆçš„å³ç§»è¿ç®—ï¼ŒåŒæ ·çš„éå†æ‰€æœ‰éå¶å­èŠ‚ç‚¹è¿›è¡Œ <code>siftDown</code> ç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„å°é¡¶å †ã€‚</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">heapify</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token punctuation">(</span>size <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>
            <span class="token function">siftDown</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> queue<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å…¥é˜Ÿæ“ä½œ" tabindex="-1"><a class="header-anchor" href="#å…¥é˜Ÿæ“ä½œ"><span>å…¥é˜Ÿæ“ä½œ</span></a></h3><p>å¯¹äº PriorityQueue æ¥è¯´ï¼Œæ ¸å¿ƒçš„å…¥é˜Ÿå°±æ˜¯ offerï¼Œå®ƒçš„æ ¸å¿ƒæ­¥éª¤ä¸º:</p><ol><li>æ ¡éªŒå…ƒç´ æ˜¯å¦ä¸ºç©ºã€‚</li><li>è®¾ç½®æ–°æ’å…¥çš„ä½ç½®ä¸º sizeã€‚</li><li>åˆ¤æ–­æ•°ç»„å®¹é‡æ˜¯å¦è¶³å¤Ÿï¼Œå¦‚æœä¸å¤Ÿåˆ™æ‰©å®¹ã€‚</li><li>å¦‚æœæ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™ç›´æ¥å°†å…¶æ”¾åˆ°ç´¢å¼• 0 ä½ç½®ã€‚</li><li>å¦‚æœä¸æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™è°ƒç”¨ <code>siftUp</code> å°†å…ƒç´ æ”¾å…¥é˜Ÿåˆ—ã€‚</li></ol><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">offer</span><span class="token punctuation">(</span><span class="token class-name">E</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//æ ¡éªŒå…ƒç´ æ˜¯å¦ä¸ºç©º</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        modCount<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token comment">//è®¾ç½®æ–°æ’å…¥çš„ä½ç½®ä¸ºsize</span>
        <span class="token keyword">int</span> i <span class="token operator">=</span> size<span class="token punctuation">;</span>
        <span class="token comment">//åˆ¤æ–­æ•°ç»„å®¹é‡æ˜¯å¦è¶³å¤Ÿï¼Œå¦‚æœä¸å¤Ÿåˆ™æ‰©å®¹</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> queue<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
            <span class="token function">grow</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        size <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token comment">//å¦‚æœæ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™ç›´æ¥å°†å…¶æ”¾åˆ°ç´¢å¼•0ä½ç½®</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
            queue<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>
        <span class="token keyword">else</span>
        <span class="token comment">//å¦‚æœä¸æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™è°ƒç”¨siftUpå°†å…ƒç´ æ”¾å…¥é˜Ÿåˆ—</span>
            <span class="token function">siftUp</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ <code>siftUp</code> æ“ä½œæ—¶ä¼šåˆ¤æ–­æ¯”è¾ƒå™¨æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ä¸ºç©ºåˆ™ä½¿ç”¨ä¼ å…¥çš„æ¯”è¾ƒå™¨ç”Ÿæˆå°é¡¶å †ï¼Œåä¹‹å°±å°†å…ƒç´  x è½¬ä¸º <code>Comparable</code> å¯¹è±¡è¿›è¡Œæ¯”è¾ƒã€‚ å› ä¸ºæ•´ä½“æ¯”è¾ƒé€»è¾‘éƒ½ä¸€æ ·ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ä»¥ <code>siftUpUsingComparator</code> æŸ¥çœ‹ä¸€ä¸‹è¿›è¡Œ <code>siftUp</code> æ“ä½œæ—¶å¯¹äºå…¥é˜Ÿå…ƒç´ çš„å¤„ç†é€»è¾‘ã€‚</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">siftUp</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token punctuation">,</span> <span class="token class-name">E</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>comparator <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token function">siftUpUsingComparator</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span>
            <span class="token function">siftUpComparable</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>siftUpUsingComparator</code> å’Œæˆ‘ä»¬æ‰‹å†™çš„ <code>siftUp</code> é€»è¾‘å·®ä¸å¤š,éƒ½æ˜¯ä¸æ–­å‘ä¸Šæ¯”è¾ƒçˆ¶èŠ‚ç‚¹ï¼Œæ‰¾åˆ°æ¯”è‡ªå·±å¤§çš„åˆ™äº¤æ¢ä½ç½®ï¼Œç›´åˆ°åˆ°è¾¾æ ¹èŠ‚ç‚¹æˆ–è€…æ¯”è¾ƒçˆ¶èŠ‚ç‚¹æ¯”è‡ªå·±å°ä¸ºæ­¢ï¼Œæ•´ä½“æ¥è¯´ <code>PriorityQueue</code> çš„ <code>siftUp</code> åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤:</p><ol><li>è·å–å…¥é˜Ÿå…ƒç´ å½“å‰ç´¢å¼•ä½ç½®çš„çˆ¶ç´¢å¼• parentã€‚</li><li>æ ¹æ®çˆ¶ç´¢å¼•æ‰¾åˆ°å…ƒç´  eã€‚</li><li>å¦‚æœæ–°èŠ‚ç‚¹ x æ¯” e å¤§ï¼Œåˆ™è¯´æ˜å½“å‰å…¥é˜Ÿæ“ä½œç¬¦åˆå°é¡¶å †è¦æ±‚ï¼Œç›´æ¥ç»“æŸå¾ªç¯ã€‚</li><li>å¦‚æœ x æ¯” e å°ï¼Œåˆ™å°†çˆ¶èŠ‚ç‚¹ e çš„å€¼æ”¹ä¸ºæˆ‘ä»¬å…¥é˜Ÿå…ƒç´  x çš„å€¼ã€‚</li><li>k æŒ‡å‘çˆ¶ç´¢å¼•ï¼Œç»§ç»­å¾ªç¯å‘ä¸Šæ¯”è¾ƒçˆ¶ç´¢å¼•ï¼Œç›´åˆ°æ‰¾åˆ°æ¯” x è¿˜å°çš„çˆ¶èŠ‚ç‚¹ eï¼Œç»ˆæ­¢å¾ªç¯ã€‚</li><li>å°† x å­˜åˆ°ç¬¦åˆè¦æ±‚çš„ç´¢å¼•ä½ç½® kã€‚</li></ol><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">siftUpUsingComparator</span><span class="token punctuation">(</span><span class="token keyword">int</span> k<span class="token punctuation">,</span> <span class="token class-name">E</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>k <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//è·å–å…¥é˜Ÿå…ƒç´ å½“å‰ç´¢å¼•ä½ç½®çš„çˆ¶ç´¢å¼•parent</span>
            <span class="token keyword">int</span> parent <span class="token operator">=</span> <span class="token punctuation">(</span>k <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token comment">//æ ¹æ®çˆ¶ç´¢å¼•æ‰¾åˆ°å…ƒç´ e</span>
            <span class="token class-name">Object</span> e <span class="token operator">=</span> queue<span class="token punctuation">[</span>parent<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token comment">// å¦‚æœæ–°èŠ‚ç‚¹xæ¯”eå¤§ï¼Œåˆ™è¯´æ˜å½“å‰å…¥é˜Ÿæ“ä½œç¬¦åˆå°é¡¶å †è¦æ±‚ï¼Œç›´æ¥ç»“æŸå¾ªç¯</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>comparator<span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> e<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token comment">//å¦‚æœxæ¯”eå°ï¼Œåˆ™å°†çˆ¶èŠ‚ç‚¹eçš„å€¼æ”¹ä¸ºæˆ‘ä»¬å…¥é˜Ÿå…ƒç´ xçš„å€¼</span>
            queue<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>
            <span class="token comment">//kæŒ‡å‘çˆ¶ç´¢å¼•ï¼Œç»§ç»­å¾ªç¯å‘ä¸Šæ¯”è¾ƒçˆ¶ç´¢å¼•ï¼Œç›´åˆ°æ‰¾åˆ°æ¯”xè¿˜å°çš„çˆ¶èŠ‚ç‚¹eï¼Œç»ˆæ­¢å¾ªç¯</span>
            k <span class="token operator">=</span> parent<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//å°†xå­˜åˆ°ç¬¦åˆè¦æ±‚çš„ç´¢å¼•ä½ç½®k</span>
        queue<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å‡ºé˜Ÿæ“ä½œ" tabindex="-1"><a class="header-anchor" href="#å‡ºé˜Ÿæ“ä½œ"><span>å‡ºé˜Ÿæ“ä½œ</span></a></h3><p>å‡ºé˜Ÿæ“ä½œå’Œæˆ‘ä»¬æ‰‹å†™çš„é€»è¾‘ä¹Ÿå·®ä¸å¤šï¼Œåªä¸è¿‡é€»è¾‘å¤„ç†çš„æ›´åŠ ç»†è‡´ï¼Œå®ƒçš„é€»è¾‘æ­¥éª¤ä¸º:</p><ol><li>size å‡ 1 å¹¶èµ‹å€¼ç»™ sã€‚</li><li>å¦‚æœé˜Ÿåˆ—ä¸ºç©ºåˆ™è¿”å› nullã€‚</li><li>å¦‚æœé˜Ÿåˆ—ä¸ä¸ºç©ºåˆ™æ‹·è´ç´¢å¼• 0 ä½ç½®å³ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ã€‚</li><li>å°†æ•°ç»„ 0 ä½ç½®è®¾ç½®ä¸º nullã€‚</li><li>å¦‚æœ s ä¸ä¸º 0ï¼Œè¯´æ˜é˜Ÿåˆ—ä¸­ä¸æ­¢ä¸€ä¸ªå…ƒç´ ï¼Œéœ€è¦ç»´æŒå°é¡¶å †çš„ç‰¹æ€§ï¼Œéœ€è¦ä»å †é¡¶å¼€å§‹è¿›è¡Œ siftDown æ“ä½œã€‚</li><li>è¿”å›ä¼˜å…ˆé˜Ÿåˆ—ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´  resultã€‚</li></ol><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> s <span class="token operator">=</span> <span class="token operator">--</span>size<span class="token punctuation">;</span>
        modCount<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token class-name">E</span> result <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> queue<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token class-name">E</span> x <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> queue<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">;</span>
        queue<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>s <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token function">siftDown</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æŸ¥çœ‹ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ " tabindex="-1"><a class="header-anchor" href="#æŸ¥çœ‹ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ "><span>æŸ¥çœ‹ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ </span></a></h3><p>peek æ–¹æ³•å¯ä»¥ä¸æ”¹å˜é˜Ÿåˆ—ç»“æ„æŸ¥çœ‹ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºåˆ™è¿”å› nullï¼Œåä¹‹è¿”å› 0 ç´¢å¼•ä½ç½®çš„å…ƒç´ ã€‚</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code> <span class="token keyword">public</span> <span class="token class-name">E</span> <span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token class-name">E</span><span class="token punctuation">)</span> queue<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="leetcode-ä¸­å…³äº-priorityqueue-çš„ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#leetcode-ä¸­å…³äº-priorityqueue-çš„ä½¿ç”¨"><span>Leetcode ä¸­å…³äº PriorityQueue çš„ä½¿ç”¨</span></a></h2><h3 id="é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#é—®é¢˜"><span>é—®é¢˜</span></a></h3><p>å› ä¸ºä¼˜å…ˆé˜Ÿåˆ—è‡ªå¸¦ä¼˜å…ˆçº§æ’åˆ—çš„å¤©ç„¶ä¼˜åŠ¿ï¼Œæ‰€ä»¥ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—è¿›è¡Œä¸€äº›è¯é¢‘ç»Ÿè®¡ç­‰æ“ä½œä¹Ÿæ˜¯éå¸¸å¿«é€Ÿå’Œæ–¹ä¾¿çš„ã€‚</p><p>å°±æ¯”å¦‚ <a href="https://leetcode.cn/problems/top-k-frequent-elements/" target="_blank" rel="noopener noreferrer">Leetcode 347. å‰ K ä¸ªé«˜é¢‘å…ƒç´ <!----></a> è¿™é“é¢˜ç›®ï¼Œå®ƒè¦æ±‚æˆ‘ä»¬è¿”å›æ•´æ•°æ•°ç»„ä¸­å‰ k ä¸ªé«˜é¢‘å…ƒç´ ï¼Œå¸¸è§„åšæ³•æˆ‘ä»¬å¯ä»¥ä¼šå°†å…ƒç´ å­˜æ”¾åˆ° <code>map</code> ä¸­ï¼Œç„¶åå¯¹è¿™ä¸ª <code>map</code> è¿›è¡Œæ’åºï¼Œå°½ç®¡å®ƒç¡®å®å¯ä»¥å®Œæˆè¿™ä¸ªé¢˜ç›®ï¼Œä½†æ˜¯ä»æ’åºå’Œå¤æ‚åº¦å’Œä¼˜å…ˆé˜Ÿåˆ—å·®ä¸å¤šéƒ½æ˜¯ <code>O(n log n)</code>ï¼Œä½†åœ¨å®ç°çš„å¤æ‚åº¦ä¸Šï¼Œåœ¨ <code>PriorityQueue</code> çš„å°è£…ä¸‹ï¼Œä½¿ç”¨ <code>PriorityQueue</code> æ¥å­˜æ”¾å…ƒç´ ä»¥åŠä»å…ƒç´ ä¸­è·å–å‰ k ä¸ªå…ƒç´ çš„æ“ä½œï¼Œç›¸æ¯”äºå‰è€…ï¼ŒåŒæ ·çš„æ€æƒ³ä¸‹åè€…çš„å®ç°ä¼šæ›´ç®€å•ä¸€äº›ã€‚</p><figure><img src="https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/leetcode347.png" alt="Leetcode 347. å‰ K ä¸ªé«˜é¢‘å…ƒç´ " tabindex="0"><figcaption>Leetcode 347. å‰ K ä¸ªé«˜é¢‘å…ƒç´ </figcaption></figure><h3 id="å®ç°æ€è·¯" tabindex="-1"><a class="header-anchor" href="#å®ç°æ€è·¯"><span>å®ç°æ€è·¯</span></a></h3><p>è§£å†³è¿™ä¸ªé—®é¢˜æˆ‘ä»¬éœ€è¦ç»Ÿè®¡ä¸€ä¸‹è¯é¢‘ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å€ŸåŠ©é¢å¤–çš„é›†åˆï¼Œæ‰€ä»¥æ•´ä½“æ­¥éª¤ä¸º:</p><ol><li>ç”¨ä¸€ä¸ª map è®°å½•ä¸€ä¸‹æ¯ä¸€ä¸ªå…ƒç´ çš„é¢‘ç‡ã€‚</li><li>åˆ›å»ºä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ï¼Œæ¯”è¾ƒè¿™ä¸ª map ä¸­çš„ valueï¼ŒæŒ‰ç…§ value ç”Ÿæˆä¼˜å…ˆé˜Ÿåˆ—ã€‚</li><li>å¦‚æœé˜Ÿåˆ—é•¿åº¦å°äº k(å³é¢˜ç›®è¦æ±‚è¿”å›çš„å‰ k ä¸ªé«˜é¢‘å…ƒç´ )ï¼Œåˆ™ç›´æ¥å°†å…ƒç´ å­˜å…¥é˜Ÿåˆ—ã€‚</li><li>å¦‚æœé˜Ÿåˆ—é•¿åº¦ç­‰äº kï¼Œåˆ™æ¯”è¾ƒä¼˜å…ˆé˜Ÿåˆ—ä¸­é˜Ÿé¦–çš„å…ƒç´ (value æœ€å°çš„å…ƒç´ )æ˜¯å¦æ¯”è¦å…¥é˜Ÿçš„å…ƒç´ ï¼Œå¦‚æœå…¥é˜Ÿå…ƒç´ æ¯”é˜Ÿé¦–å…ƒç´ å¤§ï¼Œåˆ™è¯´æ˜å…¥é˜Ÿå…ƒç´ å‡ºç°é¢‘ç‡æ¯”é˜Ÿé¦–å…ƒç´ æ›´é¢‘ç¹ï¼Œåˆ™ç§»é™¤é˜Ÿé¦–å…ƒç´ ï¼Œå†å°†æ–°æ·»åŠ çš„å…ƒç´ å…¥é˜Ÿã€‚</li><li>éå†ä¼˜å…ˆé˜Ÿåˆ—å…ƒç´ ï¼Œå­˜æ”¾åˆ°æ•°ç»„ä¸­è¿”å›ã€‚</li></ol><p>æœ€ç»ˆæˆ‘ä»¬å°±å®ç°äº†è¿™å¥—å®Œæ•´çš„ä»£ç :</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">topKFrequent</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//ç»Ÿè®¡å„ä¸ªå…ƒç´ å‡ºç°çš„é¢‘ç‡å¹¶å­˜åˆ°mapä¸­</span>
        <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> num <span class="token operator">:</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>map<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//ä¼˜å…ˆé˜Ÿåˆ—æŒ‰ç…§mapçš„valueè¿›è¡Œå‡åºæ’åº</span>
        <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token punctuation">.</span><span class="token function">comparingInt</span><span class="token punctuation">(</span>map<span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//éå†map,ç­›é€‰å‡ºå‰kä¸ªé«˜é¢‘å…ƒç´ </span>
        map<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>e <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>queue<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                queue<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>queue<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                queue<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                queue<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//è½¬ä¸ºæ•°ç»„è¿”å›</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mapToInt</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token operator">::</span><span class="token function">intValue</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> arr<span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥çœ‹åˆ°ä»£ç æ”¾åˆ° Leetcode ä¸Šæ‰§è¡Œé€šè¿‡äº†ã€‚</p><figure><img src="https://oss.javaguide.cn/github/javaguide/cs-basics/data-structure/img202306301210022.png" alt="" tabindex="0"><figcaption></figcaption></figure><p>åŒæ ·çš„ï¼Œç¬”è€…ä¹Ÿå°è¯•è¿‡ç”¨è‡ªå·±çš„æ‰‹å†™çš„ä¼˜å…ˆé˜Ÿåˆ—è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ç°æ­¥éª¤å‡ ä¹æ˜¯ä¸€è‡´çš„ã€‚</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">topKFrequent</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> num <span class="token operator">:</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>map<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>


        <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token punctuation">.</span><span class="token function">comparingInt</span><span class="token punctuation">(</span>map<span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        map<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>e <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>queue<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                queue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>queue<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                queue<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                queue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>queue<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>queue<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mapToInt</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token operator">::</span><span class="token function">intValue</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> nums <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">32</span><span class="token punctuation">,</span><span class="token number">312</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">432</span><span class="token punctuation">,</span><span class="token number">412412412</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">444</span><span class="token punctuation">,</span><span class="token number">444</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">44</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4324</span><span class="token punctuation">,</span><span class="token number">34</span><span class="token punctuation">,</span><span class="token number">23432</span><span class="token punctuation">,</span><span class="token number">4324</span><span class="token punctuation">,</span><span class="token number">324</span><span class="token punctuation">,</span><span class="token number">324</span><span class="token punctuation">,</span><span class="token number">324</span><span class="token punctuation">,</span><span class="token number">3242</span><span class="token punctuation">,</span><span class="token number">34</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">:</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Solution</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">topKFrequent</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> k<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="priorityqueue-å¸¸è§é¢è¯•é¢˜" tabindex="-1"><a class="header-anchor" href="#priorityqueue-å¸¸è§é¢è¯•é¢˜"><span>PriorityQueue å¸¸è§é¢è¯•é¢˜</span></a></h2><h3 id="priorityqueue-ä¸ºä»€ä¹ˆè¦ç”¨äºŒå‰å †å®ç°-äºŒå‰å †æœ‰ä»€ä¹ˆä½¿ç”¨ä¼˜åŠ¿å—" tabindex="-1"><a class="header-anchor" href="#priorityqueue-ä¸ºä»€ä¹ˆè¦ç”¨äºŒå‰å †å®ç°-äºŒå‰å †æœ‰ä»€ä¹ˆä½¿ç”¨ä¼˜åŠ¿å—"><span>PriorityQueue ä¸ºä»€ä¹ˆè¦ç”¨äºŒå‰å †å®ç°ï¼ŒäºŒå‰å †æœ‰ä»€ä¹ˆä½¿ç”¨ä¼˜åŠ¿å—ï¼Ÿ</span></a></h3><p>è¿™ä¸ªé—®é¢˜æˆ‘ä»¬å¯ä»¥ç”¨åè¯æ³•æ¥åˆ†æ:</p><ol><li>å‡å¦‚æˆ‘ä»¬ä½¿ç”¨æ’åºçš„æ•°ç»„ï¼Œé‚£ä¹ˆå…¥é˜Ÿæ“ä½œåˆ™æ˜¯ O(1),ä½†å‡ºé˜Ÿæ“ä½œç¡®å®å¾—æˆ‘ä»¬éœ€è¦éå†ä¸€éæ•°ç»„æ‰¾åˆ°æœ€å°çš„å“ªä¸€ä¸ª,æ‰€ä»¥å¤æ‚åº¦ä¸º O(n)ã€‚</li><li>å‡å¦‚æˆ‘ä»¬ä½¿ç”¨æœ‰åºæ•°ç»„æ¥å®ç°ï¼Œé‚£ä¹ˆå…¥é˜Ÿæ“ä½œåˆ™å› ä¸ºéœ€è¦æ’åºå˜ä¸º O(n),è€Œå‡ºé˜Ÿæ“ä½œåˆ™å˜ä¸º O(1)ã€‚ æ‰€ä»¥æŠ˜ä¸­è€ƒè™‘ï¼Œä½¿ç”¨å¸¦æœ‰å®Œå…¨äºŒå‰æ ‘æ€§è´¨çš„äºŒå‰å †ï¼Œä½¿å¾—å…¥é˜Ÿå’Œå‡ºé˜Ÿæ“ä½œéƒ½æ˜¯ O(log^n)æœ€åˆé€‚ã€‚</li></ol><h3 id="priorityqueue-æ˜¯çº¿ç¨‹å®‰å…¨çš„å—" tabindex="-1"><a class="header-anchor" href="#priorityqueue-æ˜¯çº¿ç¨‹å®‰å…¨çš„å—"><span>PriorityQueue æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ</span></a></h3><p>æˆ‘ä»¬éšæ„æŸ¥çœ‹å…¥é˜Ÿæºç ï¼Œæ²¡æœ‰ä»»ä½•é’ˆå¯¹çº¿ç¨‹å®‰å…¨çš„å¤„ç†æ“ä½œï¼Œæ‰€ä»¥å®ƒæ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚</p><h3 id="priorityqueue-åº•å±‚æ˜¯ç”¨ä»€ä¹ˆå®ç°çš„-åˆå§‹åŒ–å®¹é‡æ˜¯å¤šå°‘" tabindex="-1"><a class="header-anchor" href="#priorityqueue-åº•å±‚æ˜¯ç”¨ä»€ä¹ˆå®ç°çš„-åˆå§‹åŒ–å®¹é‡æ˜¯å¤šå°‘"><span>PriorityQueue åº•å±‚æ˜¯ç”¨ä»€ä¹ˆå®ç°çš„ï¼Ÿåˆå§‹åŒ–å®¹é‡æ˜¯å¤šå°‘ï¼Ÿ</span></a></h3><p>æˆ‘ä»¬æŸ¥çœ‹ <code>PriorityQueue</code> çš„é»˜è®¤æ„é€ æ–¹æ³•,å¯ä»¥çœ‹åˆ° <code>PriorityQueue</code> åº•å±‚ä½¿ç”¨ä¸€ä¸ªæ•°ç»„æ¥è¡¨ç¤ºä¼˜å…ˆé˜Ÿåˆ—ï¼Œè€Œè¿™ä¸ªæ•°ç»„å®é™…ä¸Šç”¨åˆ°çš„ <strong>å°é¡¶å †</strong> çš„æ€æƒ³æ¥ç»´æŒä¼˜å…ˆçº§çš„ã€‚</p><p>åˆå§‹åŒ–å®¹é‡æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ„é€ æ–¹æ³•æœ‰ä¸€ä¸ª<code>DEFAULT_INITIAL_CAPACITY,DEFAULT_INITIAL_CAPACITY</code> ç”¨äºåˆå§‹åŒ–æ•°ç»„ï¼ŒæŸ¥çœ‹å…¶å®šä¹‰å¯ä»¥å‘ç°é»˜è®¤åˆå§‹åŒ–å®¹é‡å¤§å°ä¸º 11ã€‚</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">DEFAULT_INITIAL_CAPACITY</span> <span class="token operator">=</span> <span class="token number">11</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token class-name">PriorityQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token constant">DEFAULT_INITIAL_CAPACITY</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å¦‚æœæˆ‘å¸Œæœ›-priorityqueue-æŒ‰ç…§ä»å¤§åˆ°å°çš„é¡ºåºæ’åºè¦æ€ä¹ˆåš" tabindex="-1"><a class="header-anchor" href="#å¦‚æœæˆ‘å¸Œæœ›-priorityqueue-æŒ‰ç…§ä»å¤§åˆ°å°çš„é¡ºåºæ’åºè¦æ€ä¹ˆåš"><span>å¦‚æœæˆ‘å¸Œæœ› PriorityQueue æŒ‰ç…§ä»å¤§åˆ°å°çš„é¡ºåºæ’åºè¦æ€ä¹ˆåšï¼Ÿ</span></a></h3><p>å› ä¸º <code>PriorityQueue</code> åº•å±‚çš„æ•°ç»„å®ç°çš„æ˜¯ä¸€ä¸ªå°é¡¶å †ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬å¸Œæœ›æŒ‰ç…§é™åºæ’åˆ—å¯ä»¥å°†æ¯”è¾ƒå™¨å–åä¸€ä¸‹å³å¯ã€‚</p><p>ç¤ºä¾‹ä»£ç ï¼š</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//å°†æ¯”è¾ƒå™¨å–åä¸€ä¸‹å®ç°å‡åºæ’åˆ—</span>
        <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> priorityQueue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PriorityQueue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token punctuation">.</span><span class="token function">comparingInt</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token operator">::</span><span class="token function">intValue</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reversed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//éšæœºæ’å…¥10ä¸ªå…ƒç´ </span>
        <span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token class-name">RandomUtil</span><span class="token punctuation">.</span><span class="token function">randomInt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;add &quot;</span> <span class="token operator">+</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>
            priorityQueue<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//è¾“å‡ºçœ‹çœ‹æ˜¯å¦ç¬¦åˆé¢„æœŸ</span>
        <span class="token keyword">int</span> s <span class="token operator">=</span> priorityQueue<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>priorityQueue<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä¸ºä»€ä¹ˆ-priorityqueue-åº•å±‚ç”¨æ•°ç»„æ„æˆå°é¡¶å †è€Œä¸æ˜¯ä½¿ç”¨é“¾è¡¨å‘¢" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆ-priorityqueue-åº•å±‚ç”¨æ•°ç»„æ„æˆå°é¡¶å †è€Œä¸æ˜¯ä½¿ç”¨é“¾è¡¨å‘¢"><span>ä¸ºä»€ä¹ˆ PriorityQueue åº•å±‚ç”¨æ•°ç»„æ„æˆå°é¡¶å †è€Œä¸æ˜¯ä½¿ç”¨é“¾è¡¨å‘¢ï¼Ÿ</span></a></h3><p>å…ˆè¯´ç»“è®ºï¼š <strong>ä½¿ç”¨æ•°ç»„é¿å…äº†ä¸ºç»´æŠ¤çˆ¶å­åŠå·¦é‚»å³èˆç­‰èŠ‚ç‚¹å…³ç³»çš„å†…å­˜ç©ºé—´å ç”¨</strong> ã€‚</p><p><strong>ä¸ºä»€ä¹ˆè¿˜è¦ç»´æŠ¤å·¦é‚»å³èˆå…³ç³»å‘¢ï¼Ÿ</strong> æˆ‘ä»¬éƒ½çŸ¥é“ <code>PriorityQueue</code> æ”¯æŒä¼ å…¥ä¸€ä¸ªé›†åˆç”Ÿæˆä¼˜å…ˆé˜Ÿåˆ—ï¼Œå‡å¦‚æˆ‘ä»¬ä¼ å…¥çš„æ˜¯ä¸€ä¸ªæ— åºçš„ <code>List</code>,é‚£ä¹ˆåœ¨æ•°ç»„è½¬äºŒå‰å †æ—¶éœ€è¦ç»è¿‡ä¸€ä¸ª <code>heapify</code> çš„æ“ä½œï¼Œè¯¥æ“ä½œéœ€è¦ä»æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹ï¼Œç›´åˆ°æ ¹èŠ‚ç‚¹ä¸ºæ­¢,ä¸æ–­ <code>siftDown</code> ç»´æŒè‡ªå·±ä»¥åŠå­å­™èŠ‚ç‚¹é—´çš„ä¼˜å…ˆçº§å…³ç³»ã€‚</p><p>å¦‚æœä½¿ç”¨é“¾è¡¨è¿™äº›å…³ç³»çš„ç»´æŠ¤å°±å˜å¾—ç¹çä¸”å ç”¨å†…å­˜ç©ºé—´ï¼Œä½¿ç”¨æ•°ç»„å°±ä¸ä¸€æ ·äº†ï¼Œå› ä¸ºåœ°å€çš„è¿ç»­æ€§å’Œæ˜ç¡®æ€§ï¼Œæˆ‘ä»¬å®šä½é‚»èŠ‚ç‚¹åªéœ€æŒ‰ç…§å…¬å¼è·å¾—æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹çš„ç´¢å¼•ï¼Œç„¶åä¸æ–­å‡ä¸€å°±èƒ½åˆ°è¾¾é‚»èŠ‚ç‚¹äº†ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œä½¿ç”¨æ•°ç»„å¯ä»¥ä»¥<code>O(1)</code> çš„æ—¶é—´å¤æ‚åº¦å®šä½åˆ°æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹,é€šè¿‡ä¸€ä¸ªå‡ 1 æ“ä½œå³åˆ°è¾¾ä¸‹ä¸€ä¸ªéå¶å­èŠ‚ç‚¹ï¼Œè¿™ç§è½»é‡çº§çš„å…³ç³»ç»´æŠ¤æ˜¯é“¾è¡¨æ‰€ä¸å…·å¤‡çš„ã€‚</p><h2 id="å‚è€ƒ" tabindex="-1"><a class="header-anchor" href="#å‚è€ƒ"><span>å‚è€ƒ</span></a></h2><ul><li>é¢è¯•é¢˜ï¼šPriorityQueue åº•å±‚æ˜¯ä»€ä¹ˆï¼Œåˆå§‹å®¹é‡æ˜¯å¤šå°‘ï¼Œæ‰©å®¹æ–¹å¼å‘¢ï¼š<a href="https://www.cnblogs.com/dalianpai/p/14282030.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/dalianpai/p/14282030.html<!----></a></li><li>Java Comparator comparingInt() çš„ä½¿ç”¨ï¼š<a href="https://blog.csdn.net/qq_46092061/article/details/116402145" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/qq_46092061/article/details/116402145<!----></a></li><li>ç©å„¿è½¬æ•°æ®ç»“æ„ : <a href="https://github.com/liuyubobobo/Play-with-Data-Structures" target="_blank" rel="noopener noreferrer">https://github.com/liuyubobobo/Play-with-Data-Structures<!----></a></li></ul></div><!--[--><!----><!--]--><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/HollowLatte/Note-Book/edit/main/docs/java/collection/priorityqueue-source-code.md" rel="noopener noreferrer" target="_blank" aria-label="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: hollowlatte@outlook.com">hollowlatte</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link nav-link prev" href="/Note-Book/java/collection/arrayblockingqueue-source-code.html" aria-label="ArrayBlockingQueue æºç åˆ†æ"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><FontIcon></FontIcon>ArrayBlockingQueue æºç åˆ†æ</div></a><!----></nav><!----><!--[--><!----><!--]--><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer"><a href="https://beian.miit.gov.cn/" target="_blank">é„‚ICPå¤‡2020015769å·-1</a></div><div class="vp-copyright">Copyright Â© 2024 Hollow-Latte </div></footer></div><!--]--><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/Note-Book/assets/app-DNRIH2TH.js" defer></script>
  </body>
</html>
