import{_ as t}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as s,o as c,c as n,a as e,d as r,b as o}from"./app-R-jbemKs.js";const h={},l=e("h2",{id:"什么是深分页",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#什么是深分页","aria-hidden":"true"},"#"),r(" 什么是深分页？")],-1),i=e("p",null,"深分页是指在搜索结果中获取大量数据时所遇到的性能问题和解决方案。ES默认情况下，对于大型结果集，使用传统的偏移量(from)和限制( limit)方式进行分页查询可能会导致性能下降。",-1),d=e("p",null,"并且默认情况下，ES的from和size最大值都为10000，即默认情况下最多查询2万的数据",-1),_=e("h2",{id:"深分页解决方案",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#深分页解决方案","aria-hidden":"true"},"#"),r(" 深分页解决方案")],-1),f=e("p",null,"ES的深分页问题可以通过使用游标（scroll）或搜索后深度分页（search after）来解决。其中，ES官方已不推荐使用scroll的方式，目前推荐的是search after的方式",-1),p={href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/paginate-search-results.html#search-after",target:"_blank",rel:"noopener noreferrer"},u=e("h2",{id:"search-after",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#search-after","aria-hidden":"true"},"#"),r(" Search After")],-1),m=e("p",null,"Search After的本质其实是将数据排序，然后根据每页最后一条数据的排序值去获取下一页的数据。",-1),x=e("p",null,"因此，使用Search After时，排序字段的选择很关键，需要区分度高，并且排序值不重复。通常可以选择数据的创建时间与数据id共同作为排序值",-1);function S(E,b){const a=s("ExternalLinkIcon");return c(),n("div",null,[l,i,d,_,f,e("p",null,[e("a",p,[r("Search After官方文档"),o(a)])]),u,m,x])}const A=t(h,[["render",S],["__file","deep-pages-search.html.vue"]]);export{A as default};
