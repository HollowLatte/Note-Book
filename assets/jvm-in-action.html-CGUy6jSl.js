import{_ as l}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as a,o as i,c as s,a as t,d as e,b as n,e as r}from"./app-DlTWK7Vx.js";const c={},p=t("p",null,"JVM 线上问题排查和性能调优也是面试常问的一个问题，尤其是社招中大厂的面试。",-1),u=t("p",null,"这篇文章，我会分享一些我看到的相关的案例。",-1),h=t("p",null,"下面是正文。",-1),m={href:"https://juejin.cn/post/7205141492264976445",target:"_blank",rel:"noopener noreferrer"},d=r("<li><strong>现象</strong>：线上某个服务有接口非常慢，通过监控链路查看发现，中间的 GAP 时间非常大，实际接口并没有消耗很多时间，并且在那段时间里有很多这样的请求。</li><li><strong>分析</strong>：使用 JDK 自带的<code>jvisualvm</code>分析 dump 文件(MAT 也能分析)。</li><li><strong>建议</strong>：对于 SQL 语句，如果监测到没有<code>where</code>条件的全表查询应该默认增加一个合适的<code>limit</code>作为限制，防止这种问题拖垮整个系统</li>",3),_=t("strong",null,"资料",-1),g={href:"https://heapdump.cn/article/3489050",target:"_blank",rel:"noopener noreferrer"},f={href:"https://www.cnblogs.com/mylibs/p/production-accident-0002.html",target:"_blank",rel:"noopener noreferrer"},v=r("<li><strong>现象</strong>：网络没有问题的情况下，系统某开放接口从 2023 年 3 月 10 日 14 时许开始无法访问和使用。</li><li><strong>临时解决办法</strong>：紧急回滚至上一稳定版本。</li><li><strong>分析</strong>：使用 MAT (Memory Analyzer Tool)工具分析 dump 文件。</li><li><strong>建议</strong>：正常情况下，<code>-Xmn</code>参数（控制 Young 区的大小）总是应当小于<code>-Xmx</code>参数（控制堆内存的最大大小），否则就会触发 OOM 错误。</li>",4),M=t("strong",null,"资料",-1),j={href:"https://javaguide.cn/java/jvm/jvm-parameters-intro.html",target:"_blank",rel:"noopener noreferrer"},y={href:"https://juejin.cn/post/7078624931826794503",target:"_blank",rel:"noopener noreferrer"},J=t("li",null,[t("strong",null,"现象"),e("：线上项目刚启动完使用 top 命令查看 RES 占用了超过 1.5G。")],-1),k=t("li",null,[t("strong",null,"分析"),e("：整个分析流程用到了较多工作，可以跟着作者思路一步一步来，值得学习借鉴。")],-1),b=t("li",null,[t("strong",null,"建议"),e("：远离 Hibernate。")],-1),V=t("strong",null,"资料",-1),w={href:"https://liam.page/2020/07/17/memory-stat-in-TOP/",target:"_blank",rel:"noopener noreferrer"},T={href:"https://www.heapdump.cn/article/1661497",target:"_blank",rel:"noopener noreferrer"},C=t("ul",null,[t("li",null,[t("strong",null,"现象"),e("：广告服务在新版本上线后，收到了大量的服务超时告警。")]),t("li",null,[t("strong",null,"分析"),e("：使用 MAT (Memory Analyzer Tool) 工具分析 dump 文件。")]),t("li",null,[t("strong",null,"建议"),e("：学会 YGC（Young GC） 问题的排查思路，掌握 YGC 的相关知识点。")])],-1),G={href:"https://shuyi.tech/archives/have-a-try-in-jvm-combat",target:"_blank",rel:"noopener noreferrer"},O=t("p",null,"通过观察 GC 频率和停顿时间，来进行 JVM 内存空间调整，使其达到最合理的状态。调整过程记得小步快跑，避免内存剧烈波动影响线上服务。 这其实是最为简单的一种 JVM 性能调优方式了，可以算是粗调吧。",-1),A={href:"https://mp.weixin.qq.com/s/df1uxHWUXzhErxW1sZ6OvQ",target:"_blank",rel:"noopener noreferrer"},x=t("ul",null,[t("li",null,[t("strong",null,"案例 1"),e("：使用 guava cache 的时候，没有设置最大缓存数量和弱引用，导致频繁触发 Young GC")]),t("li",null,[t("strong",null,"案例 2"),e("： 对于一个查询和排序分页的 SQL，同时这个 SQL 需要 join 多张表，在分库分表下，直接调用 SQL 性能很差。于是，查单表，再在内存排序分页，用了一个 List 来保存数据，而有些数据量大，造成了这个现象。")])],-1),N={href:"https://tech.meituan.com/2020/11/12/java-9-cms-gc.html",target:"_blank",rel:"noopener noreferrer"},S=t("p",null,"这篇文章共 2w+ 字，详细介绍了 GC 基础，总结了 CMS GC 的一些常见问题分析与解决办法。",-1);function L(D,B){const o=a("ExternalLinkIcon");return i(),s("div",null,[p,u,h,t("p",null,[t("a",m,[e("一次线上 OOM 问题分析 - 艾小仙 - 2023"),n(o)])]),t("ul",null,[d,t("li",null,[_,e("："),t("a",g,[e("实战案例：记一次 dump 文件分析历程转载 - HeapDump - 2022"),n(o)]),e("。")])]),t("p",null,[t("a",f,[e("生产事故-记一次特殊的 OOM 排查 - 程语有云 - 2023"),n(o)])]),t("ul",null,[v,t("li",null,[M,e("："),t("a",j,[e("最重要的 JVM 参数总结 - JavaGuide - 2023"),n(o)])])]),t("p",null,[t("a",y,[e("一次大量 JVM Native 内存泄露的排查分析（64M 问题） - 掘金 - 2022"),n(o)])]),t("ul",null,[J,k,b,t("li",null,[V,e("："),t("a",w,[e("Linux top 命令里的内存相关字段（VIRT, RES, SHR, CODE, DATA）"),n(o)])])]),t("p",null,[t("a",T,[e("YGC 问题排查，又让我涨姿势了！ - IT 人的职场进阶 - 2021"),n(o)])]),C,t("p",null,[t("a",G,[e("听说 JVM 性能优化很难？今天我小试了一把！ - 陈树义 - 2021"),n(o)])]),O,t("p",null,[t("a",A,[e("你们要的线上 GC 问题案例来啦 - 编了个程 - 2021"),n(o)])]),x,t("p",null,[t("a",N,[e("Java 中 9 种常见的 CMS GC 问题分析与解决 - 美团技术团 - 2020"),n(o)])]),S])}const P=l(c,[["render",L],["__file","jvm-in-action.html.vue"]]),z=JSON.parse('{"path":"/java/jvm/jvm-in-action.html","title":"JVM线上问题排查和性能调优案例","lang":"zh-CN","frontmatter":{"title":"JVM线上问题排查和性能调优案例","category":"Java","tag":["JVM"],"description":"JVM 线上问题排查和性能调优也是面试常问的一个问题，尤其是社招中大厂的面试。 这篇文章，我会分享一些我看到的相关的案例。 下面是正文。 一次线上 OOM 问题分析 - 艾小仙 - 2023 现象：线上某个服务有接口非常慢，通过监控链路查看发现，中间的 GAP 时间非常大，实际接口并没有消耗很多时间，并且在那段时间里有很多这样的请求。 分析：使用 JD...","head":[["meta",{"property":"og:url","content":"https://hollowlatte.github.io/Note-Book/Note-Book/java/jvm/jvm-in-action.html"}],["meta",{"property":"og:site_name","content":"Note-Book"}],["meta",{"property":"og:title","content":"JVM线上问题排查和性能调优案例"}],["meta",{"property":"og:description","content":"JVM 线上问题排查和性能调优也是面试常问的一个问题，尤其是社招中大厂的面试。 这篇文章，我会分享一些我看到的相关的案例。 下面是正文。 一次线上 OOM 问题分析 - 艾小仙 - 2023 现象：线上某个服务有接口非常慢，通过监控链路查看发现，中间的 GAP 时间非常大，实际接口并没有消耗很多时间，并且在那段时间里有很多这样的请求。 分析：使用 JD..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-18T19:11:00.000Z"}],["meta",{"property":"article:author","content":"Hollow-Latte"}],["meta",{"property":"article:tag","content":"JVM"}],["meta",{"property":"article:modified_time","content":"2024-03-18T19:11:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"JVM线上问题排查和性能调优案例\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-03-18T19:11:00.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Hollow-Latte\\",\\"url\\":\\"https://hollowlatte.github.io/Note-Book\\"}]}"]]},"headers":[],"git":{"createdTime":1710789060000,"updatedTime":1710789060000,"contributors":[{"name":"hollowlatte","email":"hollowlatte@outlook.com","commits":1}]},"readingTime":{"minutes":2.99,"words":896},"filePathRelative":"java/jvm/jvm-in-action.md","localizedDate":"2024年3月18日","excerpt":"<p>JVM 线上问题排查和性能调优也是面试常问的一个问题，尤其是社招中大厂的面试。</p>\\n<p>这篇文章，我会分享一些我看到的相关的案例。</p>\\n<p>下面是正文。</p>\\n<p><a href=\\"https://juejin.cn/post/7205141492264976445\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">一次线上 OOM 问题分析 - 艾小仙 - 2023</a></p>\\n<ul>\\n<li><strong>现象</strong>：线上某个服务有接口非常慢，通过监控链路查看发现，中间的 GAP 时间非常大，实际接口并没有消耗很多时间，并且在那段时间里有很多这样的请求。</li>\\n<li><strong>分析</strong>：使用 JDK 自带的<code>jvisualvm</code>分析 dump 文件(MAT 也能分析)。</li>\\n<li><strong>建议</strong>：对于 SQL 语句，如果监测到没有<code>where</code>条件的全表查询应该默认增加一个合适的<code>limit</code>作为限制，防止这种问题拖垮整个系统</li>\\n<li><strong>资料</strong>：<a href=\\"https://heapdump.cn/article/3489050\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">实战案例：记一次 dump 文件分析历程转载 - HeapDump - 2022</a>。</li>\\n</ul>","autoDesc":true}');export{P as comp,z as data};
