import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as o,o as i,c as l,a as n,d as e,b as a,e as p}from"./app-BtuJf2rB.js";const c={},u={class:"hint-container tip"},r=n("p",{class:"hint-container-title"},"提示",-1),d={href:"https://docs.github.com/en/actions/quickstart",target:"_blank",rel:"noopener noreferrer"},k={href:"https://github.com/marketplace?category=&type=actions&verification=&copilot_app=&query=",target:"_blank",rel:"noopener noreferrer"},m=p(`<h2 id="说明" tabindex="-1"><a class="header-anchor" href="#说明"><span>说明</span></a></h2><p>在GitHub上部署Vuepress需要用到GitHub Action，通过特定的事件触发构建、部署操作，实现自动化部署</p><p>总的来说需要三个步骤：</p><ol><li>生成并配置Token：由于部署的操作需要有操作仓库的权限，所以需要一个Token，该Token会在workflow脚本中使用</li><li>编写workflow脚本：该脚本规定触发构建的事件，脚本执行的构建目录等等</li><li>配置GitHub Pages：配置已构建好的分支作为GitHub Pages展示页面</li></ol><h2 id="生成并配置token" tabindex="-1"><a class="header-anchor" href="#生成并配置token"><span>生成并配置Token</span></a></h2><ol><li>点击 个人头像-&gt; Settings -&gt; Develop settings -&gt; Personal access tokens -&gt; Tokens(classic) -&gt; Generate new token</li><li>生成完成后去仓库的Settings -&gt; Actions secrets and variables -&gt; New repository secret，将刚刚生成的token作为值，名称命名为<code>ACCESS_TOKEN</code>（其实命名为其他也可以，只要在workflow使用该名称即可）</li></ol><h2 id="编写workflow脚本" tabindex="-1"><a class="header-anchor" href="#编写workflow脚本"><span>编写workflow脚本</span></a></h2><p>在项目根目录创建<code>.github/workflows</code>目录，workflow脚本在该目录下都会被GitHub Action识别</p><p>下面将编写一个workflow脚本：</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy VuePress To Github Pages

<span class="token comment"># 触发事件</span>
<span class="token key atrule">on</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> push <span class="token punctuation">]</span>

<span class="token key atrule">jobs</span><span class="token punctuation">:</span>
  <span class="token key atrule">build-and-deploy-to-page</span><span class="token punctuation">:</span>
    <span class="token key atrule">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
    <span class="token key atrule">steps</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Checkout
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/checkout@v4

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install pnpm
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> pnpm/action<span class="token punctuation">-</span>setup@v2
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">run_install</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Setup Node.js
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v4
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token key atrule">node-version</span><span class="token punctuation">:</span> <span class="token number">20</span>
          <span class="token key atrule">cache</span><span class="token punctuation">:</span> pnpm

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install Dependencies
        <span class="token key atrule">run</span><span class="token punctuation">:</span> pnpm install

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Build VuePress Site
        <span class="token key atrule">run</span><span class="token punctuation">:</span> pnpm run docs<span class="token punctuation">:</span>build

      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Deploy to GitHub Pages
        <span class="token comment"># 使用第三方的包</span>
        <span class="token key atrule">uses</span><span class="token punctuation">:</span> JamesIves/github<span class="token punctuation">-</span>pages<span class="token punctuation">-</span>deploy<span class="token punctuation">-</span>action@v4
        <span class="token key atrule">with</span><span class="token punctuation">:</span>
          <span class="token comment"># 构建完成的文件存放的分支</span>
          <span class="token key atrule">branch</span><span class="token punctuation">:</span> github<span class="token punctuation">-</span>pages
          <span class="token comment"># 构建完成的文件所在目录，与VuePress工程中配置的一致即可</span>
          <span class="token key atrule">folder</span><span class="token punctuation">:</span> dist
          <span class="token comment"># 引用Token</span>
          <span class="token key atrule">token</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.ACCESS_TOKEN <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>branch 配置的分支，在执行完流水线后，会覆盖该分支原本的内容，因此建议配置为专门用于存放构建文件的分支，而不是提交代码的分支</p></div><h2 id="配置github-pages" tabindex="-1"><a class="header-anchor" href="#配置github-pages"><span>配置GitHub Pages</span></a></h2><ol><li>代码仓库Settings -&gt; Pages -&gt; Source -&gt; Deploy from a branch</li><li>Branch 选择workflow脚本中指定的构建Branch，目录选择<code>/</code>即可，然后save</li><li>等待一会，GitHub Page就会部署完成，GitHub Page的URL一般为：<code>https://{用户名}.github.io/{仓库名}</code></li></ol><div class="hint-container warning"><p class="hint-container-title">注意</p><p>注意，如果VuePress工程中的base路径未配置的话，部署完成后，页面获取静态资源时，会去<code>https://{用户名}.github.io</code>获取，这样是找不到资源的</p><p>因此，需要配置VuePress中的base路径为当前仓库名，这样静态资源就会去<code>https://{用户名}.github.io/{仓库名}</code>获取</p></div>`,14);function b(h,v){const s=o("ExternalLinkIcon");return i(),l("div",null,[n("div",u,[r,n("p",null,[e("查看具体："),n("a",d,[e("GitHub Actions文档"),a(s)])]),n("p",null,[e("查看更多三方Actions："),n("a",k,[e("GitHub Marketplace"),a(s)])])]),m])}const f=t(c,[["render",b],["__file","github-deploy-vuepress.html.vue"]]),w=JSON.parse('{"path":"/practice-manual/github/github-deploy-vuepress.html","title":"GitHub Actions部署VuePress","lang":"zh-CN","frontmatter":{"title":"GitHub Actions部署VuePress","author":null,"category":"Github","tag":"Github","description":"提示 查看具体：GitHub Actions文档 查看更多三方Actions：GitHub Marketplace 说明 在GitHub上部署Vuepress需要用到GitHub Action，通过特定的事件触发构建、部署操作，实现自动化部署 总的来说需要三个步骤： 生成并配置Token：由于部署的操作需要有操作仓库的权限，所以需要一个Token，该T...","head":[["meta",{"property":"og:url","content":"https://hollowlatte.github.io/Note-Book/Note-Book/practice-manual/github/github-deploy-vuepress.html"}],["meta",{"property":"og:site_name","content":"Note-Book"}],["meta",{"property":"og:title","content":"GitHub Actions部署VuePress"}],["meta",{"property":"og:description","content":"提示 查看具体：GitHub Actions文档 查看更多三方Actions：GitHub Marketplace 说明 在GitHub上部署Vuepress需要用到GitHub Action，通过特定的事件触发构建、部署操作，实现自动化部署 总的来说需要三个步骤： 生成并配置Token：由于部署的操作需要有操作仓库的权限，所以需要一个Token，该T..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-26T11:26:10.000Z"}],["meta",{"property":"article:author","content":"Hollow-Latte"}],["meta",{"property":"article:tag","content":"Github"}],["meta",{"property":"article:modified_time","content":"2024-03-26T11:26:10.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"GitHub Actions部署VuePress\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-03-26T11:26:10.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Hollow-Latte\\",\\"url\\":\\"https://hollowlatte.github.io/Note-Book\\"}]}"]]},"headers":[{"level":2,"title":"说明","slug":"说明","link":"#说明","children":[]},{"level":2,"title":"生成并配置Token","slug":"生成并配置token","link":"#生成并配置token","children":[]},{"level":2,"title":"编写workflow脚本","slug":"编写workflow脚本","link":"#编写workflow脚本","children":[]},{"level":2,"title":"配置GitHub Pages","slug":"配置github-pages","link":"#配置github-pages","children":[]}],"git":{"createdTime":1711452370000,"updatedTime":1711452370000,"contributors":[{"name":"hollowlatte","email":"hollowlatte@outlook.com","commits":1}]},"readingTime":{"minutes":2.13,"words":638},"filePathRelative":"practice-manual/github/github-deploy-vuepress.md","localizedDate":"2024年3月26日","excerpt":"<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\">提示</p>\\n<p>查看具体：<a href=\\"https://docs.github.com/en/actions/quickstart\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">GitHub Actions文档</a></p>\\n<p>查看更多三方Actions：<a href=\\"https://github.com/marketplace?category=&amp;type=actions&amp;verification=&amp;copilot_app=&amp;query=\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">GitHub Marketplace</a></p>\\n</div>","autoDesc":true}');export{f as comp,w as data};
