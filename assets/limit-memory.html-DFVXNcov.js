import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as t,o,c as p,a as n,d as s,b as c,e as l}from"./app-DmUsX9Nr.js";const r={},i=n("h2",{id:"docker-compose-限制容器内存占用",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#docker-compose-限制容器内存占用"},[n("span",null,"Docker Compose 限制容器内存占用")])],-1),u={href:"https://docs.docker.com/compose/compose-file/deploy/#resources",target:"_blank",rel:"noopener noreferrer"},k=l(`<p>以RocketMQ的docker compose文件为例：</p><div class="language-yaml line-numbers-mode" data-ext="yml" data-title="yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3&quot;</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">name-server</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> apache/rocketmq<span class="token punctuation">:</span>5.1.2
    <span class="token key atrule">command</span><span class="token punctuation">:</span> ./mqnamesrv
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;9876:9876&quot;</span>
    <span class="token comment"># 配置资源占用</span>
    <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
      <span class="token key atrule">resources</span><span class="token punctuation">:</span>
        <span class="token key atrule">limits</span><span class="token punctuation">:</span>
          <span class="token key atrule">memory</span><span class="token punctuation">:</span> 512m
  <span class="token key atrule">broker</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> apache/rocketmq<span class="token punctuation">:</span>5.1.2
    <span class="token key atrule">command</span><span class="token punctuation">:</span> ./mqbroker <span class="token punctuation">-</span>n host.docker.internal<span class="token punctuation">:</span>9876 <span class="token punctuation">-</span>c /home/rocketmq/rocketmq<span class="token punctuation">-</span>5.1.2/conf/broker.conf
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;./broker.conf:/home/rocketmq/rocketmq-5.1.2/conf/broker.conf&quot;</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;9877:9877&quot;</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;10909:10909&quot;</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;10911:10911&quot;</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;10912:10912&quot;</span>
    <span class="token comment"># 配置资源占用</span>
    <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
      <span class="token key atrule">resources</span><span class="token punctuation">:</span>
        <span class="token key atrule">limits</span><span class="token punctuation">:</span>
          <span class="token key atrule">memory</span><span class="token punctuation">:</span> 1g
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> name<span class="token punctuation">-</span>server
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在每个service中加上<code>deploy.resources.limits.memory</code>的配置即可</p>`,3);function m(d,v){const a=t("ExternalLinkIcon");return o(),p("div",null,[i,n("p",null,[s("官方文档："),n("a",u,[s("Docker Compose Limit"),c(a)])]),k])}const b=e(r,[["render",m],["__file","limit-memory.html.vue"]]),g=JSON.parse('{"path":"/practice-manual/docker/compose/limit-memory.html","title":"DockerCompose 限制内存使用","lang":"zh-CN","frontmatter":{"title":"DockerCompose 限制内存使用","author":null,"category":"Docker","tag":"Docker","date":"2024-02-05T00:00:00.000Z","description":"Docker Compose 限制容器内存占用 官方文档：Docker Compose Limit 以RocketMQ的docker compose文件为例： 在每个service中加上deploy.resources.limits.memory的配置即可","head":[["meta",{"property":"og:url","content":"https://hollowlatte.github.io/Note-Book/Note-Book/practice-manual/docker/compose/limit-memory.html"}],["meta",{"property":"og:site_name","content":"Note-Book"}],["meta",{"property":"og:title","content":"DockerCompose 限制内存使用"}],["meta",{"property":"og:description","content":"Docker Compose 限制容器内存占用 官方文档：Docker Compose Limit 以RocketMQ的docker compose文件为例： 在每个service中加上deploy.resources.limits.memory的配置即可"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-28T19:26:07.000Z"}],["meta",{"property":"article:author","content":"Hollow-Latte"}],["meta",{"property":"article:tag","content":"Docker"}],["meta",{"property":"article:published_time","content":"2024-02-05T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-03-28T19:26:07.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"DockerCompose 限制内存使用\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-02-05T00:00:00.000Z\\",\\"dateModified\\":\\"2024-03-28T19:26:07.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Hollow-Latte\\",\\"url\\":\\"https://hollowlatte.github.io/Note-Book\\"}]}"]]},"headers":[{"level":2,"title":"Docker Compose 限制容器内存占用","slug":"docker-compose-限制容器内存占用","link":"#docker-compose-限制容器内存占用","children":[]}],"git":{"createdTime":1711653967000,"updatedTime":1711653967000,"contributors":[{"name":"hollowlatte","email":"hollowlatte@outlook.com","commits":1}]},"readingTime":{"minutes":0.41,"words":124},"filePathRelative":"practice-manual/docker/compose/limit-memory.md","localizedDate":"2024年2月5日","excerpt":"<h2>Docker Compose 限制容器内存占用</h2>\\n<p>官方文档：<a href=\\"https://docs.docker.com/compose/compose-file/deploy/#resources\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Docker Compose Limit</a></p>\\n<p>以RocketMQ的docker compose文件为例：</p>\\n<div class=\\"language-yaml\\" data-ext=\\"yml\\" data-title=\\"yml\\"><pre class=\\"language-yaml\\"><code><span class=\\"token key atrule\\">version</span><span class=\\"token punctuation\\">:</span> <span class=\\"token string\\">\\"3\\"</span>\\n\\n<span class=\\"token key atrule\\">services</span><span class=\\"token punctuation\\">:</span>\\n  <span class=\\"token key atrule\\">name-server</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token key atrule\\">image</span><span class=\\"token punctuation\\">:</span> apache/rocketmq<span class=\\"token punctuation\\">:</span>5.1.2\\n    <span class=\\"token key atrule\\">command</span><span class=\\"token punctuation\\">:</span> ./mqnamesrv\\n    <span class=\\"token key atrule\\">ports</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token punctuation\\">-</span> <span class=\\"token string\\">\\"9876:9876\\"</span>\\n    <span class=\\"token comment\\"># 配置资源占用</span>\\n    <span class=\\"token key atrule\\">deploy</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token key atrule\\">resources</span><span class=\\"token punctuation\\">:</span>\\n        <span class=\\"token key atrule\\">limits</span><span class=\\"token punctuation\\">:</span>\\n          <span class=\\"token key atrule\\">memory</span><span class=\\"token punctuation\\">:</span> 512m\\n  <span class=\\"token key atrule\\">broker</span><span class=\\"token punctuation\\">:</span>\\n    <span class=\\"token key atrule\\">image</span><span class=\\"token punctuation\\">:</span> apache/rocketmq<span class=\\"token punctuation\\">:</span>5.1.2\\n    <span class=\\"token key atrule\\">command</span><span class=\\"token punctuation\\">:</span> ./mqbroker <span class=\\"token punctuation\\">-</span>n host.docker.internal<span class=\\"token punctuation\\">:</span>9876 <span class=\\"token punctuation\\">-</span>c /home/rocketmq/rocketmq<span class=\\"token punctuation\\">-</span>5.1.2/conf/broker.conf\\n    <span class=\\"token key atrule\\">volumes</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token punctuation\\">-</span> <span class=\\"token string\\">\\"./broker.conf:/home/rocketmq/rocketmq-5.1.2/conf/broker.conf\\"</span>\\n    <span class=\\"token key atrule\\">ports</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token punctuation\\">-</span> <span class=\\"token string\\">\\"9877:9877\\"</span>\\n      <span class=\\"token punctuation\\">-</span> <span class=\\"token string\\">\\"10909:10909\\"</span>\\n      <span class=\\"token punctuation\\">-</span> <span class=\\"token string\\">\\"10911:10911\\"</span>\\n      <span class=\\"token punctuation\\">-</span> <span class=\\"token string\\">\\"10912:10912\\"</span>\\n    <span class=\\"token comment\\"># 配置资源占用</span>\\n    <span class=\\"token key atrule\\">deploy</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token key atrule\\">resources</span><span class=\\"token punctuation\\">:</span>\\n        <span class=\\"token key atrule\\">limits</span><span class=\\"token punctuation\\">:</span>\\n          <span class=\\"token key atrule\\">memory</span><span class=\\"token punctuation\\">:</span> 1g\\n    <span class=\\"token key atrule\\">depends_on</span><span class=\\"token punctuation\\">:</span>\\n      <span class=\\"token punctuation\\">-</span> name<span class=\\"token punctuation\\">-</span>server\\n</code></pre></div>","autoDesc":true}');export{b as comp,g as data};
