import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as e,c as n,e as s}from"./app-BtuJf2rB.js";const t={},o=s(`<h2 id="nohup" tabindex="-1"><a class="header-anchor" href="#nohup"><span>nohup</span></a></h2><p>nohup可以将进程放在后台运行，特别是不想用docker时，可以用来部署一些简单的服务</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># 运行collect-report.jar，日志将默认输出到当前目录下的nohup.out文件中</span>
<span class="token function">nohup</span> <span class="token function">java</span> <span class="token parameter variable">-jar</span> collect-report.jar <span class="token operator">&amp;</span>

<span class="token comment"># 运行collect-report.jar，指定日志输出到当前目录下的info.log文件中</span>
<span class="token function">nohup</span> <span class="token function">java</span> <span class="token parameter variable">-jar</span> collect-report.jar <span class="token operator">&gt;</span> info.log <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="结束nohup进程" tabindex="-1"><a class="header-anchor" href="#结束nohup进程"><span>结束nohup进程</span></a></h2><p>使用nohup后，如果想要停掉该服务，先要<code>ps -ef | grep</code>查出进程号再用kill结束进程，这样操作比较麻烦</p><p>可以结合这几个操作，使用一条命令解决 <code>ps -ef | grep &quot;collect-report&quot; | grep -v grep | awk &#39;{print $2}&#39; | xargs kill -9</code></p><p>执行上面的命令即可一条命令结束进程</p><div class="hint-container warning"><p class="hint-container-title">注意</p><p>当系统中有同名的服务时需要注意grep会查出多个，会导致错误结束其他进程的问题</p></div><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h2><p>结合上面，可以编写run.sh、stop.sh脚本来启动、结束服务</p><p>例如运行jar包为collect-report.jar的SpringBoot服务</p><p><strong>run.sh</strong>：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">nohup</span> <span class="token function">java</span> <span class="token parameter variable">-jar</span> collect-report.jar <span class="token operator">&gt;</span> info.log <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>stop.sh</strong>:</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;collect-report&quot;</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-v</span> <span class="token function">grep</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&#39;{print $2}&#39;</span> <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token function">kill</span> <span class="token parameter variable">-9</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,15),p=[o];function r(l,c){return e(),n("div",null,p)}const d=a(t,[["render",r],["__file","nohup-deploy-service.html.vue"]]),h=JSON.parse('{"path":"/practice-manual/linux/nohup-deploy-service.html","title":"Nohup部署服务","lang":"zh-CN","frontmatter":{"title":"Nohup部署服务","author":null,"category":"Linux","tag":"Linux","description":"nohup nohup可以将进程放在后台运行，特别是不想用docker时，可以用来部署一些简单的服务 结束nohup进程 使用nohup后，如果想要停掉该服务，先要ps -ef | grep查出进程号再用kill结束进程，这样操作比较麻烦 可以结合这几个操作，使用一条命令解决 ps -ef | grep \\"collect-report\\" | grep ...","head":[["meta",{"property":"og:url","content":"https://hollowlatte.github.io/Note-Book/Note-Book/practice-manual/linux/nohup-deploy-service.html"}],["meta",{"property":"og:site_name","content":"Note-Book"}],["meta",{"property":"og:title","content":"Nohup部署服务"}],["meta",{"property":"og:description","content":"nohup nohup可以将进程放在后台运行，特别是不想用docker时，可以用来部署一些简单的服务 结束nohup进程 使用nohup后，如果想要停掉该服务，先要ps -ef | grep查出进程号再用kill结束进程，这样操作比较麻烦 可以结合这几个操作，使用一条命令解决 ps -ef | grep \\"collect-report\\" | grep ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-26T11:26:10.000Z"}],["meta",{"property":"article:author","content":"Hollow-Latte"}],["meta",{"property":"article:tag","content":"Linux"}],["meta",{"property":"article:modified_time","content":"2024-03-26T11:26:10.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Nohup部署服务\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-03-26T11:26:10.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Hollow-Latte\\",\\"url\\":\\"https://hollowlatte.github.io/Note-Book\\"}]}"]]},"headers":[{"level":2,"title":"nohup","slug":"nohup","link":"#nohup","children":[]},{"level":2,"title":"结束nohup进程","slug":"结束nohup进程","link":"#结束nohup进程","children":[]},{"level":2,"title":"总结","slug":"总结","link":"#总结","children":[]}],"git":{"createdTime":1711452370000,"updatedTime":1711452370000,"contributors":[{"name":"hollowlatte","email":"hollowlatte@outlook.com","commits":1}]},"readingTime":{"minutes":0.96,"words":289},"filePathRelative":"practice-manual/linux/nohup-deploy-service.md","localizedDate":"2024年3月26日","excerpt":"<h2>nohup</h2>\\n<p>nohup可以将进程放在后台运行，特别是不想用docker时，可以用来部署一些简单的服务</p>\\n<div class=\\"language-bash\\" data-ext=\\"sh\\" data-title=\\"sh\\"><pre class=\\"language-bash\\"><code><span class=\\"token comment\\"># 运行collect-report.jar，日志将默认输出到当前目录下的nohup.out文件中</span>\\n<span class=\\"token function\\">nohup</span> <span class=\\"token function\\">java</span> <span class=\\"token parameter variable\\">-jar</span> collect-report.jar <span class=\\"token operator\\">&amp;</span>\\n\\n<span class=\\"token comment\\"># 运行collect-report.jar，指定日志输出到当前目录下的info.log文件中</span>\\n<span class=\\"token function\\">nohup</span> <span class=\\"token function\\">java</span> <span class=\\"token parameter variable\\">-jar</span> collect-report.jar <span class=\\"token operator\\">&gt;</span> info.log <span class=\\"token operator\\"><span class=\\"token file-descriptor important\\">2</span>&gt;</span><span class=\\"token file-descriptor important\\">&amp;1</span> <span class=\\"token operator\\">&amp;</span>\\n</code></pre></div>","autoDesc":true}');export{d as comp,h as data};
