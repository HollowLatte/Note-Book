import{_ as e}from"./plugin-vue_export-helper-x3n3nnut.js";import{o as a,c as t,e as o}from"./app-R-jbemKs.js";const i={},l=o('<h2 id="问题症状" tabindex="-1"><a class="header-anchor" href="#问题症状" aria-hidden="true">#</a> 问题症状</h2><p>日志中显示线程池的一条线程调用栈非常长，并且显示StackOverflow</p><h2 id="问题排查" tabindex="-1"><a class="header-anchor" href="#问题排查" aria-hidden="true">#</a> 问题排查</h2><ol><li>栈信息中未找到相应的业务代码调用信息，所以无法定位到具体是哪行源码出了问题，只能通过日志中的上下文大概定位</li><li>发现关键字JSONUtil，是hutool包中的JSON序列化工具，初步判断是JSON序列化的问题</li></ol><p>去hutool的GitHub仓库，查找JSONUtil的相关issue，看见了关键信息“JSONUtil不支持循环引用”，因此写了段循环引用的代码，也出现了StackOverflow，并且发现业务代码中也有循环引用的代码，破案！</p><h2 id="解决问题" tabindex="-1"><a class="header-anchor" href="#解决问题" aria-hidden="true">#</a> 解决问题</h2><p>将所有用到hutool的JSONUtil的地方都替换为fastjson</p><h2 id="防范措施" tabindex="-1"><a class="header-anchor" href="#防范措施" aria-hidden="true">#</a> 防范措施</h2><ol><li>JSON序列化工具使用成熟稳定的</li><li>优化业务的逻辑，避免对象间的循环引用</li></ol>',9),r=[l];function h(c,d){return a(),t("div",null,r)}const f=e(i,[["render",h],["__file","hutool-stackoverflow.html.vue"]]);export{f as default};
