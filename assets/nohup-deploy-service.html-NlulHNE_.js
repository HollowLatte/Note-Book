import{_ as a}from"./plugin-vue_export-helper-x3n3nnut.js";import{o as n,c as s,e}from"./app-R-jbemKs.js";const p={},o=e(`<h2 id="nohup" tabindex="-1"><a class="header-anchor" href="#nohup" aria-hidden="true">#</a> nohup</h2><p>nohup可以将进程放在后台运行，特别是不想用docker时，可以用来部署一些简单的服务</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 运行collect-report.jar，日志将默认输出到当前目录下的nohup.out文件中</span>
<span class="token function">nohup</span> <span class="token function">java</span> <span class="token parameter variable">-jar</span> collect-report.jar <span class="token operator">&amp;</span>

<span class="token comment"># 运行collect-report.jar，指定日志输出到当前目录下的info.log文件中</span>
<span class="token function">nohup</span> <span class="token function">java</span> <span class="token parameter variable">-jar</span> collect-report.jar <span class="token operator">&gt;</span> info.log <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="结束nohup进程" tabindex="-1"><a class="header-anchor" href="#结束nohup进程" aria-hidden="true">#</a> 结束nohup进程</h2><p>使用nohup后，如果想要停掉该服务，先要<code>ps -ef | grep</code>查出进程号再用kill结束进程，这样操作比较麻烦</p><p>可以结合这几个操作，使用一条命令解决 <code>ps -ef | grep &quot;collect-report&quot; | grep -v grep | awk &#39;{print $2}&#39; | xargs kill -9</code></p><p>执行上面的命令即可一条命令结束进程</p><div class="hint-container warning"><p class="hint-container-title">注意</p><p>当系统中有同名的服务时需要注意grep会查出多个，会导致错误结束其他进程的问题</p></div><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h2><p>结合上面，可以编写run.sh、stop.sh脚本来启动、结束服务</p><p>例如运行jar包为collect-report.jar的SpringBoot服务</p><p><strong>run.sh</strong>：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">nohup</span> <span class="token function">java</span> <span class="token parameter variable">-jar</span> collect-report.jar <span class="token operator">&gt;</span> info.log <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>stop.sh</strong>:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;collect-report&quot;</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-v</span> <span class="token function">grep</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">&#39;{print $2}&#39;</span> <span class="token operator">|</span> <span class="token function">xargs</span> <span class="token function">kill</span> <span class="token parameter variable">-9</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,15),t=[o];function r(c,l){return n(),s("div",null,t)}const u=a(p,[["render",r],["__file","nohup-deploy-service.html.vue"]]);export{u as default};
