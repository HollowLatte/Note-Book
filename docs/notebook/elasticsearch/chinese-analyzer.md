---
title: 中文分词
category: Elasticsearch
tag: Elasticsearch
---

## ik分词

## 分词模式

ik目前就两种分词模式ik_smart、ik_max_word

### ik_smart

最细粒度分词模式，这种分词模式会尽可能地将句子划分成最小的词汇单元，例如“中华人民共和国成立了”会被划分成“中华人民共和国”、“成立”、“了”三个词汇。

### ik_max_word

最大化分词模式，这种分词模式会将整个句子进行分词，包括所有可能的词汇，例如“中华人民共和国成立了”会被划分成“中华”、“中华人民”、“中华人民共和国”、“人民”、“共和”、“共和国”、“国成”、“成立”、“了”九个词汇。

## 最佳实践

索引分词时用ik_max_word，在搜索时用ik_smart。
即：索引时最大化的将文章内容分词，搜索时更精确的搜索到想要的结果。

## ik分词优化

### 修改ik源码

ik分词器的这两种模式在生产上用会有一个问题，就是相同的文本在max_word模式下分出来的词并不一定会包含smart模式下分出的词，这种情况就会导致搜不出来bad
case。建议修改源码将max_word的分词和smart的分词合并到set里建索引

ik分词器源码里只有智能非智能两种，两种不能一起去使用。一起使用的话，智能和非智能分出来的效果不一致。会导致很多搜索无结果的case


