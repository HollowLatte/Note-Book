---
title: 事务隔离级别
category: MySQL
tag: MySQL
---

## 事务特性

实现事务必须要遵守 4 个特性，即ACID，分别如下：

- **原子性(Atomicity)**：一个事务中的所有操作，要么全部完成，要么全部不完成，执行过程中发生错误，会被回滚到事务开始前的状态
- **一致性(Consistency)**：是指事务操作前和操作后，数据满足完整性约束，数据库保持一致性状态。
- **隔离性(Isolation)**：数据库允许多个并发事务同时对其数据进行读写和修改的能力，隔离性可以防止多个事务并发执行时由于交叉执行而导致数据的不一致
- **持久性(Durability)**：事务处理结束后，对数据的修改就是永久的，即便系统故障也不会丢失。

## 并行事务引发的问题

- 脏读：读到其他事务未提交的数据。T1修改但未提交，T2读取该值，T1撤销，T2读到无效的数据
- 不可重复读：前后读取的数据不一致。T1读取某行数据，T2修改该行数据并提交，T1再次读取该行数据，T1两次读取的数据不一致
- 幻读：前后读取的记录数量不一致。T1读取多条数据，T2插入或删除一条数据，T1再次读取，T1两次读取到的结果条数不一致

## 事务隔离级别

- 读未提交(read uncommitted)：指一个事务还没提交时，它做的变更就能被其他事务看到；
- 读已提交(read committed)：指一个事务提交之后，它做的变更才能被其他事务看到；
- 可重复读(repeatable read)：指一个事务执行过程中看到的数据，一直跟这个事务启动时看到的数据是一致的，MySQL InnoDB
  引擎的默认隔离级别；
- 串行化(serializable)：会对记录加上读写锁，在多个事务对这条记录进行读写操作时，如果发生了读写冲突的时候，后访问的事务必须等前一个事务执行完成，才能继续执行；
